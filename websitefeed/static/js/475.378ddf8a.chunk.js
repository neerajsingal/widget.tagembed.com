"use strict";(self.webpackChunkwebsite_editor=self.webpackChunkwebsite_editor||[]).push([[475],{4313:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(9246),i=s(6345),a=s(2867);const l=e=>{const t=(0,a.yN)("accessToken"),s={guestid:(0,a.yN)("referenceId"),authorization:`Bearer ${t}`};return{...e,headers:{...s,...e.headers}}};const o=class{constructor(){const e={baseURL:i.nC},t=n.A.create(e);return t.interceptors.request.use(l),n.A.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),t}}},7722:(e,t,s)=>{s.d(t,{s:()=>o,y:()=>r});var n=s(3271),i=s(2867),a=s(6345),l=s(4313);const o=()=>(new l.A).get(`${a.mi}?v=1.0.0`),r=(e,t,s,o)=>r=>{let c=(0,i.yN)("referenceId");c||(c=`TGB-${Date.now()}-${Math.floor(1e4*Math.random())}`,(0,i.UW)("referenceId",c)),r({type:n.zh,payload:c}),(e=>(new l.A).get(`${a.hH}?networkId=${e}`))(e).then((l=>{if(null!==l&&void 0!==l&&l.data){const{data:d,statusCode:h}=l.data;if(200==h&&Object.keys(d||{}).length>0){const{themes:l,personalization:h,token:m,banner:p}=d;let u;(0,i.UW)("accessToken",m);let v={themes:[],Personalization:h,Banner:p};if((null===l||void 0===l?void 0:l.length)>0){if(a.l_){var c;(0,i.UW)("selectLayout",1),u=null===(c=l[0])||void 0===c?void 0:c.theme[0],v.themes=l}else{const e=(0,i.v4)(t,l);u=e.find((e=>e.themeId==s)),v.themes=e}r({type:n.H$,payload:{selectedTheme:u,networkId:e}}),(0,i.UW)(`widgetThemes-${e}`,v),r({type:n.Vp,payload:{...v,token:m}})}o&&o(!0)}else o&&o(!1)}})).catch((e=>{o&&o(!1)}))}},5402:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(6345),i=s(4414);const a=e=>{const{altTxt:t,clsname:s,path:a,isPrefix:l}=e;return(0,i.jsx)("img",{src:`${l?"":n.ZU}${a}`,alt:t,className:s,...e})}},7475:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var n=s(9950),i=s(300),a=s(6345),l=s(7836),o=s(2867),r=s(7722),c=s(3271),d=s(5402),h=s(4414);const m=(0,n.lazy)((()=>Promise.all([s.e(901),s.e(492)]).then(s.bind(s,9492)))),p=(0,n.lazy)((()=>s.e(893).then(s.bind(s,2893)))),u=(0,n.lazy)((()=>s.e(616).then(s.bind(s,9616)))),v=(0,n.lazy)((()=>Promise.all([s.e(695),s.e(901),s.e(204)]).then(s.bind(s,6204)))),b=(0,n.lazy)((()=>s.e(111).then(s.bind(s,5111)))),g=(0,n.lazy)((()=>s.e(195).then(s.bind(s,3195)))),y=(0,n.lazy)((()=>Promise.all([s.e(695),s.e(370)]).then(s.bind(s,1370)))),x={step:a.l_?1:0,noFdCrt:0,networkId:0,netName:"",isMobile:!1,mbOpt:!0,request:!1};class f extends n.Component{constructor(e){var t;super(e),t=this,this.getAppCNT=()=>{(0,r.s)().then((e=>{if(null!==e&&void 0!==e&&e.data){const t=e.data;if(this.props.stCNT(t),t.dummyThemes){const{id:e,name:s}=(0,o.zD)();console.log(e,"id");const n=()=>this.setState({networkId:e,netName:s},(()=>this.checkStep(t.dummyThemes)));4==e?(0,o.Wx)(`https://maps.googleapis.com/maps/api/js?key=${(0,o.af)(l.i0)}&libraries=places`,n):n()}}})).catch((e=>console.error("ex content",e)))},this.getDWidth=()=>{const e=document.querySelector(".micro-main");e&&this.setState({isMobile:e.offsetWidth<768})},this.checkStep=e=>{var t,s;const{networkId:n}=this.state,{stTH:i,stSelTH:a,stRfId:l,stPost:r}=this.props;let c=this.state.step,d=0;const h=(0,o.yN)("referenceId"),m=(0,o.yN)("accessToken"),p=(0,o.yN)(`widgetThemes-${n}`),u=(0,o.yN)(`feedCreated-${n}`),v=(0,o.yN)(`postCreated-${n}`),b=null!==(t=(0,o.yN)(`reviewFilters-${n}`))&&void 0!==t?t:[],g=(0,o.yN)(`selectedTheme-${n}`);h&&m&&p&&Object.keys(p).length>0&&p.themes&&p.Personalization&&(c=1,v&&(d=u||0,c=2));let y=[],x={},f={};var k;0==c?y=e&&Object.keys(e).length>0?e[n]:[]:(2==c&&r({posts:v,reviewFilters:b}),y=null===p||void 0===p?void 0:p.themes,x=null===p||void 0===p?void 0:p.Personalization,f=null!==(k=null===p||void 0===p?void 0:p.Banner)&&void 0!==k?k:{});l(h),i({themes:y,Personalization:x,token:null!==m&&void 0!==m?m:null,Banner:f}),(null===(s=y)||void 0===s?void 0:s.length)>0&&a(g||y[0],n),this.setState({step:c,noFdCrt:d})},this.resetState=()=>{const{networkId:e,netName:t}=this.state;this.setState({...x,networkId:e,netName:t})},this.moveStep=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{step:s,networkId:n,noFdCrt:i}=t.state,{getThemes:a,themeData:l}=t.props;if(0==s){const{selectedTheme:e,themes:s}=l;t.setState({request:!0}),a(n,s,e.themeId,(e=>{t.setState({request:!1,step:e?1:0})}))}else if(1==s){const s=e?i+1:i;t.setState({step:2,noFdCrt:s},(()=>{(0,o.UW)(`feedCreated-${n}`,s)}))}else t.setState({step:3})},this.setActiveTab=e=>this.setState({step:e}),this.state={...x}}componentDidMount(){this.getAppCNT(),this.getDWidth(),window.addEventListener("resize",this.getDWidth)}componentWillUnmount(){window.removeEventListener("resize",this.getDWidth)}render(){const{step:e,networkId:t,isMobile:s,mbOpt:i,netName:l,noFdCrt:o}=this.state,{content:r,themeData:c}=this.props;return(0,h.jsx)("div",{className:a.l_?`sw_microTheme ${i?"":"aside_open"} ${3==e?"no_sidebar":""}`:"",children:(0,h.jsx)("div",{className:`micro-main website-${a.bl}`,children:a.l_?(0,h.jsx)("div",{className:"micro-inn",children:1==e?t?(0,h.jsx)(m,{...this.state,moveStep:this.moveStep}):"":(0,h.jsxs)(h.Fragment,{children:[s?(0,h.jsxs)("div",{className:"mi-mobile-gear "+(i?"":"open"),onClick:()=>this.setState({mbOpt:!i}),children:[(0,h.jsx)(d.A,{path:"/micro/gear.svg",altTxt:"gear",clsname:"img-fluid"}),(0,h.jsx)(d.A,{path:"/micro/close.svg",altTxt:"close",clsname:"img-fluid"})]}):null,(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(y,{...this.state,moveStep:this.moveStep,setActiveTab:this.setActiveTab})}),(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(b,{noFdCrt:o,isMobile:s})}),3==e?(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(g,{selectedTheme:c.selectedTheme,networkId:t,content:r,resetState:this.resetState,backAction:()=>this.setState({step:2})})}):null]})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(p,{title:`${l} Widget`,step:e,backAction:()=>this.setState({step:2})})}),(0,h.jsxs)("div",{className:"micro-inn",children:[s?(0,h.jsxs)("div",{className:"mi-mobile-gear "+(i?"":"open"),onClick:()=>this.setState({mbOpt:!i}),children:[(0,h.jsx)(d.A,{path:"/micro/gear.svg",altTxt:"gear",clsname:"img-fluid"}),(0,h.jsx)(d.A,{path:"/micro/close.svg",altTxt:"close",clsname:"img-fluid"})]}):null,e>2?(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(g,{selectedTheme:c.selectedTheme,networkId:t,content:r,resetState:this.resetState})}):(0,h.jsxs)(h.Fragment,{children:[s&&i?null:(0,h.jsxs)(h.Fragment,{children:[0==e?null:(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(u,{...this.state,setActiveTab:this.setActiveTab})}),(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(v,{...this.state,moveStep:this.moveStep})})]}),(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(b,{noFdCrt:o})})]})]})]})})})}}const k=(0,i.Ng)((e=>({themeData:e.themeReducer,content:e.contentReducer.sCNT})),(e=>({stTH:t=>e({type:c.Vp,payload:t}),stSelTH:(t,s)=>e({type:c.H$,payload:{selectedTheme:t,networkId:s}}),stPost:t=>e({type:c.xg,payload:t}),stRfId:t=>e({type:c.zh,payload:t}),stCNT:t=>e({type:c.gZ,payload:t}),getThemes:(t,s,n,i)=>e((0,r.y)(t,s,n,i))})))((0,n.memo)(f))}}]);