"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8689],{88689:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var i=t(9950),l=t(14478),a=t(11127),s=t(52867),o=t(80415),r=t(66345),d=t(44414);const u=i.lazy((()=>t.e(2804).then(t.bind(t,2804)))),h=i.lazy((()=>Promise.all([t.e(7351),t.e(8502)]).then(t.bind(t,67351)))),c=i.lazy((()=>Promise.all([t.e(9580),t.e(1422)]).then(t.bind(t,51422)))),v=i.lazy((()=>t.e(56).then(t.bind(t,70056)))),g=i.lazy((()=>Promise.all([t.e(8400),t.e(6337)]).then(t.bind(t,65518))));class p extends i.PureComponent{constructor(){super(),this.handleResize=()=>{var e,n,t,i;this.containerRef.current&&this.setState({containerSize:{width:null===this||void 0===this||null===(e=this.containerRef)||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetWidth,height:null===this||void 0===this||null===(t=this.containerRef)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.offsetHeight}})},this.state={containerSize:{width:null,height:null},parentID:""},this.containerRef=i.createRef()}componentDidMount(){var e,n,t,i,a,o,r;((0,s.j1)(this.props.wall.Personalization.widgetTheme),window.addEventListener("resize",this.handleResize),null!==this&&void 0!==this&&null!==(e=this.containerRef)&&void 0!==e&&e.current)&&this.setState({containerSize:{width:null===this||void 0===this||null===(t=this.containerRef)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.offsetWidth,height:null===this||void 0===this||null===(a=this.containerRef)||void 0===a||null===(o=a.current)||void 0===o?void 0:o.offsetHeight}});(this.observer=new IntersectionObserver((e=>{let[n]=e;n.isIntersecting&&((0,l.KL)(),this.observer.disconnect())}),{threshold:.002}),null!==this&&void 0!==this&&null!==(n=this.containerRef)&&void 0!==n&&n.current)&&this.observer.observe(null===this||void 0===this||null===(r=this.containerRef)||void 0===r?void 0:r.current)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.observer&&this.observer.disconnect()}componentDidUpdate(){let e=document.querySelector(".tb_app_container"),n=s.wV?s.wV:e.parentNode.id;this.setState({parentID:n})}render(){var e,n,t,l,a,p,m,b,w,f;const{wall:S,reviewFilters:j,webFilters:k,postData:x,languageSetting:z,filter_tags:B}=this.props,R=!!(null!==S&&void 0!==S&&S.Banner&&Object.keys(S.Banner).length>0),_=R?(0,s.Gv)(S.Banner)?S.Banner:S.Banner[0]:{},y=!!(R||S.CustomBanner&&Object.keys(S.CustomBanner).length>0&&(1===(null===_||void 0===_?void 0:_.status)&&1===(null===_||void 0===_?void 0:_.banner_position)||1===(null===_||void 0===_?void 0:_.status)&&1===(null===_||void 0===_?void 0:_.banner_position)||1===(null===S||void 0===S||null===(e=S.BannerImage)||void 0===e?void 0:e.status))),I=!(!R||1!==_.status||2!==_.banner_position),D=r.uS?![55,60,16,47,57].includes(S.Personalization.widgetTheme):![55,52,60,16,47,57,61,84].includes(S.Personalization.widgetTheme),P=R&&1===(null===_||void 0===_?void 0:_.status)&&6==(null===_||void 0===_?void 0:_.bannerType)||8==(null===_||void 0===_?void 0:_.bannerType)&&0===S.Personalization.filterStatus&&![57,84].includes(S.Personalization.widgetTheme),H=r.uS?1===S.Personalization.filterStatus:!!(1===S.Personalization.filterStatus&&k&&k.length>1),T=!!(B&&B.length>0);let F=""!=k&&k&&k.length>0?k.map((e=>{let{Network:n}=e;return null===n||void 0===n?void 0:n.id})):null;!r.HY&&null!==S&&void 0!==S&&null!==(n=S.Background)&&void 0!==n&&n.image&&S.Background.image.includes(o.vr)&&(S.Background.image=String(S.Background.image).replace(o.Vy,""));const U=0===(null===S||void 0===S||null===(t=S.Background)||void 0===t?void 0:t.transparent)||null!==S&&void 0!==S&&null!==(l=S.Background)&&void 0!==l&&l.image&&r.uS?{backgroundImage:null!==S&&void 0!==S&&null!==(a=S.Background)&&void 0!==a&&a.image?`url(${null===S||void 0===S||null===(p=S.Background)||void 0===p?void 0:p.image})`:"",backgroundColor:null===S||void 0===S||null===(m=S.Background)||void 0===m?void 0:m.color}:null,C=!![63,64].includes(S.Personalization.widgetTheme),N=!(1!=(null===S||void 0===S||null===(b=S.ThemeRule)||void 0===b?void 0:b.showReviewHeader)||!C);return(0,d.jsxs)("div",{className:"tb_app_container",style:{minHeight:[47,16,49,55,60,52].includes(S.Personalization.widgetTheme)?"100%":`${this.props.postHeight}px`},ref:this.containerRef,children:[y&&!P?(0,d.jsxs)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:[" ",(0,d.jsx)(u,{Banner:S.Banner,BannerImage:S.BannerImage})]}):"",(0,d.jsxs)("div",{className:"tb_app_wrapper",style:U,children:[P&&y||N?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(h,{isHeader:N,reviewFilters:j,appendData:x.appendData,wall:S,languageSetting:z,postData:x,bannerType:null===_||void 0===_?void 0:_.bannerType})}):null,(null!==S&&void 0!==S&&null!==(w=S.UserRule)&&void 0!==w&&w.on_site_upload&&S.UgcSettings.onsite_status||r.Qy&&S.UgcSettings.onsite_status)&&(r.MH||r.HY&&![63,64,50].includes(S.Personalization.widgetTheme))?(0,d.jsxs)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:[" ",(0,d.jsx)(g,{UgcSettings:S.UgcSettings,id:S.Wall.id,tagShopWallId:S.Wall.wallId})," "]}):null,D&&(H||T)?(0,d.jsxs)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:[" ",(0,d.jsx)(c,{type:S.Personalization.filter_type,webFilters:k,filter_tags:B,appendData:x.appendData,wall:S,languageSetting:z,postData:x})]}):"",C&&1==(null===S||void 0===S||null===(f=S.ThemeRule)||void 0===f?void 0:f.showReviewList)||!C?(0,d.jsxs)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:[" ",(0,d.jsx)(v,{...this.props,brandingNetworks:F,containerSize:this.state.containerSize,parentID:this.state.parentID})]}):null,P&&I?(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(h,{isHeader:N,reviewFilters:j,appendData:x.appendData,wall:S,languageSetting:z,postData:x})}):null]}),I?(0,d.jsxs)(i.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:[" ",(0,d.jsx)(u,{Banner:S.Banner,BannerImage:S.BannerImage})]}):""]})}}const m=(0,a.Ng)((e=>{if(!0===e.postHeight.manage_height){return{postHeight:e.postHeight.data.replace("px",""),renderId:e.renderId}}return{renderId:e.renderId}}),(e=>({managePostHeight:n=>e((0,l.V3)(n))})))(p)}}]);