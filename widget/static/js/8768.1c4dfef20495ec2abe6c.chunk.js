"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8768],{48768:(e,t,i)=>{i.r(t),i.d(t,{AiIcon:()=>j,AiIconColored:()=>b,default:()=>E});var a=i(89379),s=i(9950),r=i(10300),l=i(52867),n=i(80415),o=i(66345),c=i(93152),d=i(44414),h=Array.from({length:5},((e,t)=>t+1));class u extends s.Component{constructor(e){super(e),this.handleClick=e=>{var{addRatings:t}=this.props;this.setState({activeIndex:e}),t(e)},this.handleMouseEnter=e=>this.setState({hoverIndex:e}),this.handleMouseLeave=()=>{this.setState({hoverIndex:null})},this.state={activeIndex:null,hoverIndex:null}}render(){var{hoverIndex:e,activeIndex:t}=this.state;return(0,d.jsx)("div",{className:"t_rate_wrap",children:h.map(((i,a)=>(0,d.jsx)("div",{className:"t_star_ico_wrap".concat(i<=e?" t_h_active_":"").concat(i<=t?" t_active_":""),onClick:()=>this.handleClick(i),onMouseEnter:()=>this.handleMouseEnter(i),onMouseLeave:this.handleMouseLeave,children:(0,d.jsx)("div",{className:"t_star_ico tb__icon tb-star-outline",children:(0,d.jsx)("div",{})})},a)))})}}const m=u;var v=i(96011),_=i.n(v),p=i(46256),g=i.n(p),x=i(76506),f=i(68553),w=s.lazy((()=>Promise.all([i.e(779),i.e(9708)]).then(i.bind(i,62910)))),b=()=>(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M9.89539 6.67812C10.1534 6.58595 10.3266 6.33964 10.3266 6.06577C10.3266 5.79191 10.1534 5.54559 9.89645 5.45342L8.71518 5.02753C8.14049 4.82136 7.61855 4.49055 7.18683 4.05882C6.7551 3.62709 6.42428 3.10515 6.21811 2.53046L5.79222 1.3492C5.74665 1.22352 5.66358 1.11488 5.55425 1.03795C5.44492 0.961021 5.31461 0.919523 5.18093 0.919067C4.90759 0.919067 4.66128 1.09175 4.56805 1.3492L4.14269 2.53046C3.93656 3.10526 3.60569 3.62728 3.17386 4.05903C2.74202 4.49077 2.21993 4.82153 1.64508 5.02753L0.464879 5.45342C0.206908 5.54612 0.0336914 5.79191 0.0336914 6.06577C0.0336914 6.33964 0.206908 6.58542 0.46382 6.67812L1.64508 7.10401C2.21981 7.31012 2.74178 7.64091 3.17352 8.07265C3.60526 8.50439 3.93605 9.02636 4.14216 9.60109L4.56805 10.7829C4.66075 11.0398 4.90707 11.2125 5.1804 11.2125C5.45373 11.2125 5.70005 11.0393 5.79222 10.7824L6.21811 9.60109C6.42428 9.02639 6.7551 8.50446 7.18683 8.07273C7.61855 7.641 8.14049 7.31018 8.71518 7.10401L9.89539 6.67812Z",fill:"url(#paint0_linear_8573_5744)"}),(0,d.jsx)("path",{d:"M13.6629 11.7821C13.8087 11.73 13.9066 11.5908 13.9066 11.436C13.9066 11.2812 13.8087 11.142 13.6635 11.0899L12.9958 10.8492C12.671 10.7326 12.376 10.5456 12.1319 10.3016C11.8879 10.0576 11.7009 9.76259 11.5844 9.43776L11.3437 8.77009C11.3179 8.69906 11.271 8.63765 11.2092 8.59417C11.1474 8.55069 11.0737 8.52724 10.9982 8.52698C10.8437 8.52698 10.7045 8.62458 10.6518 8.77009L10.4113 9.43776C10.2948 9.76265 10.1078 10.0577 9.86374 10.3017C9.61966 10.5458 9.32457 10.7327 8.99965 10.8492L8.33258 11.0899C8.18677 11.1423 8.08887 11.2812 8.08887 11.436C8.08887 11.5908 8.18677 11.7297 8.33198 11.7821L8.99965 12.0228C9.3245 12.1393 9.61953 12.3263 9.86355 12.5703C10.1076 12.8143 10.2945 13.1094 10.411 13.4342L10.6518 14.1022C10.7042 14.2474 10.8434 14.345 10.9979 14.345C11.1524 14.345 11.2916 14.2471 11.3437 14.1019L11.5844 13.4342C11.7009 13.1094 11.8879 12.8144 12.1319 12.5704C12.376 12.3263 12.671 12.1393 12.9958 12.0228L13.6629 11.7821Z",fill:"url(#paint1_linear_8573_5744)"}),(0,d.jsxs)("defs",{children:[(0,d.jsxs)("linearGradient",{id:"paint0_linear_8573_5744",x1:"5.69478",y1:"1.07347",x2:"5.28302",y2:"11.0581",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#654985"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E16490"})]}),(0,d.jsxs)("linearGradient",{id:"paint1_linear_8573_5744",x1:"11.2886",y1:"8.61425",x2:"11.0559",y2:"14.2577",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#654985"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#E16490"})]})]})]}),j=()=>(0,d.jsxs)("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M9.95199 6.53749C10.2123 6.44448 10.3871 6.19591 10.3871 5.91954C10.3871 5.64317 10.2123 5.39459 9.95305 5.30158L8.76098 4.87179C8.18102 4.66373 7.65431 4.32989 7.21863 3.8942C6.78294 3.45852 6.4491 2.93181 6.24104 2.35185L5.81125 1.15977C5.76526 1.03295 5.68143 0.923309 5.5711 0.845677C5.46077 0.768045 5.32927 0.726168 5.19436 0.725708C4.91853 0.725708 4.66995 0.899976 4.57587 1.15977L4.14662 2.35185C3.9386 2.93192 3.60471 3.45872 3.16892 3.89442C2.73313 4.33011 2.20625 4.6639 1.62614 4.87179L0.435135 5.30158C0.174803 5.39513 0 5.64317 0 5.91954C0 6.19591 0.174803 6.44394 0.434066 6.53749L1.62614 6.96728C2.20614 7.17527 2.73289 7.5091 3.16858 7.94479C3.60427 8.38048 3.93809 8.90723 4.14608 9.48722L4.57587 10.6798C4.66942 10.9391 4.91799 11.1134 5.19383 11.1134C5.46966 11.1134 5.71824 10.9386 5.81125 10.6793L6.24104 9.48722C6.4491 8.90726 6.78294 8.38055 7.21863 7.94487C7.65431 7.50919 8.18102 7.17534 8.76098 6.96728L9.95199 6.53749Z",fill:"white"}),(0,d.jsx)("path",{d:"M13.7539 11.688C13.9011 11.6354 13.9999 11.4949 13.9999 11.3387C13.9999 11.1825 13.9011 11.042 13.7545 10.9894L13.0808 10.7465C12.753 10.6289 12.4553 10.4402 12.209 10.194C11.9627 9.94771 11.774 9.65 11.6564 9.3222L11.4135 8.64842C11.3875 8.57674 11.3402 8.51476 11.2778 8.47088C11.2154 8.42701 11.1411 8.40334 11.0648 8.40308C10.9089 8.40308 10.7684 8.50158 10.7153 8.64842L10.4726 9.3222C10.3551 9.65006 10.1663 9.94782 9.92003 10.1941C9.67372 10.4403 9.37592 10.629 9.04803 10.7465L8.37485 10.9894C8.22771 11.0423 8.12891 11.1825 8.12891 11.3387C8.12891 11.4949 8.22771 11.6351 8.37425 11.688L9.04803 11.9309C9.37585 12.0485 9.67358 12.2372 9.91984 12.4834C10.1661 12.7297 10.3548 13.0274 10.4723 13.3552L10.7153 14.0293C10.7681 14.1759 10.9086 14.2744 11.0645 14.2744C11.2205 14.2744 11.361 14.1756 11.4135 14.029L11.6564 13.3552C11.774 13.0274 11.9627 12.7297 12.209 12.4835C12.4553 12.2372 12.753 12.0485 13.0808 11.9309L13.7539 11.688Z",fill:"white"})]}),N=e=>{var t,{wall:i,type:a,onClosePopUp:s,msg:r}=e,{thanksMsg:l,thanksMsgDec:n,closeBtn:o}=r;return(0,d.jsx)("div",{className:"t_modal_content",children:(0,d.jsxs)("div",{className:"t_s_wrap",children:[(0,d.jsx)("img",{className:"t_s_icon_",src:"https://cdn.tagshop.ai/app/theme/media/icons/".concat(a,"-icon.svg"),height:80,width:80,alt:""}),"check"==a?(0,d.jsx)("div",{className:"t_s_title",children:l}):null,(0,d.jsx)("div",{className:"t_s_desc",children:(null===i||void 0===i||null===(t=i.SnapUp)||void 0===t?void 0:t.Form.successText)||n}),(0,d.jsx)("div",{className:"t_f_close_wrap",children:(0,d.jsx)("button",{className:"t_f_p_btn",onClick:s,children:o})})]})})},C=e=>{var{logo:t}=e;return t?(0,d.jsx)("div",{className:"t_m_logo_w",children:(0,d.jsx)("img",{className:"t_m_logo",src:t,height:20,width:130,alt:""})}):null};class y extends s.Component{constructor(e){var t,i;super(e),this.handleNext=e=>this.setState({submitPost:!1}),this.checkUpload=e=>this.setState({fileUpload:e}),this.onShowCloseSubmitPicPopUp=e=>{var{isOpen:t}=this.state;this.setState({isOpen:!t})},this.onSubmitPostData=e=>{var t,{formLanguage:i}=this.state;if(e)this.setState({submitError:!0,submitErrorMessage:null===i||void 0===i?void 0:i.fileUploadError});else{var{name:s,email:r,upload_image:n,is_terms_check:d,tandc:h,rateProduct:u,reviewTitle:m,review:v,layout:_,captionError:p,connectionTo:f,lastName:w,termsPolicy:b}=this.state,{wallId:j,wall:N,feeds:C,themeByWallID:y}=this.props,E=1774873===(null===N||void 0===N||null===(t=N.ThemeInfo)||void 0===t?void 0:t.ownerId);if(this.setState({submitError:!1}),h&&(null===s||void 0===s?void 0:s.length)>0&&(null===r||void 0===r?void 0:r.length)>0&&(0,l.DT)(r)&&!r.includes("mailinator")&&h&&(1==_&&(u>0||E)&&(!o.HY||m)||2==_)&&((null===v||void 0===v?void 0:v.length)>0||E)&&!p){var S,k,I,T;if([2197222,2201411].includes(null===N||void 0===N||null===(S=N.ThemeInfo)||void 0===S?void 0:S.wallId)&&(!f||!w))return this.submitError();this.setState({apiRequest:!0});var P=!!window.ugcSuite||!!o.Nz,L={};P&&C&&C.length>0&&C.map((e=>{e&&e.Network&&Object.keys(e.Network).length&&29==e.Network.id&&e.value1&&(L={feedId:e.value1})}));var R=[];n&&n.length>0?n.map((e=>R.push((0,a.A)({},e)))):R=[{file:"",type:1,height:"",width:"",thumbnail:""}];var M=(0,a.A)({wallId:null!==(k=null===N||void 0===N||null===(I=N.ThemeInfo)||void 0===I?void 0:I.wallId)&&void 0!==k?k:j,onsite_token:null===N||void 0===N||null===(T=N.SnapUp)||void 0===T?void 0:T.token,name:w?"".concat(s," ").concat(w):s,email:r,media:R,caption:v,rating:u,title:2===_?" ":m,connectionTo:f,termsPolicy:b?1:0},L);[104746].includes(null===N||void 0===N?void 0:N.ThemeInfo.ownerId)&&(M.is_terms_check=d),(0,c.VT)(M).then((e=>{var t;if(o.aD){var{onsite_token:i,message:a}=e.data;if(!window.location.href.includes("studio=1")&&!N.SnapUp.moderation&&a){this.props.onsiteTokenUpdate(i);var s=g()("".concat(o._6),{transports:["websocket"],transport:["websocket"],upgrade:!0,reconnection:!0,reconnectionDelay:3e3,reconnectionDelayMax:5e3,reconnectionAttempts:2}),r=new Array;r.push(j),r.push(a[0].synced),s.emit("poststatus",r),s.on("reconnect_attempt",(e=>{e>2&&s.disconnect()}))}}this.props.themeByWallID(String(null===N||void 0===N||null===(t=N.ThemeInfo)||void 0===t?void 0:t.webId),null),(0,l.no)()&&(0,x.um)("reviewHub",null===N||void 0===N?void 0:N.ThemeInfo.ownerId),this.setState({step:3,apiRequest:!1},(()=>setTimeout((()=>{l.GF||o.eg?window.location.reload():this.props.onSitePopup(!1)}),5e3)),document.querySelector("html").style.overflow="auto")})).catch((e=>{var{data:t}=e.response;t&&this.setState({submitError:!0,submitErrorMessage:t.resposne_message,apiRequest:!1}),console.error(e)}))}else this.submitError()}},this.submitError=()=>{var{name:e,lastName:t,email:i,rateProduct:a,reviewTitle:s,review:r,connectionTo:n}=this.state;r&&0!==r.trim().length||this.setState({captionError:!0,apiRequest:!1}),e&&0!==e.trim().length||this.setState({nameError:!0,apiRequest:!1}),t&&0!==t.trim().length||this.setState({lastNameError:!0}),n&&0!==n.trim().length||this.setState({connectionToError:!0}),i&&0!==i.trim().length&&(0,l.DT)(i)&&!i.includes("mailinator")||this.setState({emailError:!0,apiRequest:!1}),0===a&&this.setState({rateProductError:!0}),s&&0!==s.trim().length||this.setState({reviewTitleError:!0,apiRequest:!1})},this.addCaption=e=>{String(e.target.value).length<=500?this.setState({review:e.target.value,captionError:!1}):this.setState({captionError:!0})},this.aiPromptFun=e=>{""!=String(this.state.aiPromptCopy).trim()&&String(this.state.aiPromptCopy).trim()!=String(e.target.value).trim()&&this.setState({isRegenrate:!0}),this.setState({aiPrompt:e.target.value})},this.typeWriterEffect=()=>{var{aiResponse:e,currentIndex:t}=this.state;t<e.length?this.setState((i=>({review:i.review+e[t],currentIndex:i.currentIndex+1})),(()=>{setTimeout(this.typeWriterEffect,20)})):this.setState({isTyping:!1,loadbtn:!1})},this.aiReviewFun=e=>{var{aiPrompt:t,rateProduct:i,layout:a,formLanguage:s}=this.state;this.setState({aiInput:!0,aiReadOnly:!0,isTyping:!0,currentIndex:0,review:"",aiPromptError:""});var r=t.split(/\s+/).map((e=>e.length));if(!t||r.length<=2)return this.setState({aiPromptError:null===s||void 0===s?void 0:s.reviewminLimitError}),!1;this.setState({writeAiReview:!0,loadbtn:!0,aiSpinner:!0,isRegenrate:!1,aiResponse:"",rateProductError:!1}),_().post(o.Cy,{input_text:t,stars:2==a?i:0}).then((e=>{200==e.data.status_code?this.setState({aiResponse:e.data.body,item:e.data.body,aiSpinner:!1,aiPromptCopy:t,isRegenrate:!1,captionError:!1},(()=>{this.typeWriterEffect()})):this.setState({loading:!1,isTyping:!1,loadbtn:!1,aiSpinner:!1,aiPromptError:e.data.body,aiPromptCopy:t,isRegenrate:!1,captionError:!1})})).catch((e=>{this.setState({error:e.message,loading:!1,isTyping:!1,loadbtn:!1,aiSpinner:!1,aiPromptError:null===s||void 0===s?void 0:s.internalServerError,aiPromptCopy:t,isRegenrate:!1,captionError:!1})}))},this.aiPromptEditFun=()=>{this.setState({aiReadOnly:!1},(()=>{var e=this.textAreaRef.current;e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))}))},this.addRatings=e=>this.setState({rateProduct:e,rateProductError:!1}),this.onChangeReviewTitle=e=>this.setState({reviewTitle:e.target.value,reviewTitleError:!1}),this.addPostImage=(e,t,i,a,s)=>{var{upload_image:r}=this.state,l={file:e,type:i,height:a,width:s,thumbnail:t};r.push(l),r.length>20&&(r.length=20),this.setState({upload_image:r,isActiveIndex:r.length+1,fileUpload:!1,submitError:!1})},this.onClickToRemove=e=>{var{upload_image:t}=this.state;if(t&&t.length>0){var i=t.filter((t=>t.file!=e.file));this.setState({upload_image:i,errorClickMore:!1,isActiveIndex:i.length+1,removedFile:e})}},this.onClickToEdit=e=>t=>this.setState({isActiveIndex:e,step:1}),this.onTextName=e=>{this.setState({name:e.target.value,nameError:!1},(()=>{this.state.name||this.setState({nameError:!0})}))},this.onTextLstName=e=>{this.setState({lastName:e.target.value,lastNameError:!1},(()=>{this.state.lastName||this.setState({lastNameError:!0})}))},this.onTextEmail=e=>{var{value:t}=e.target;this.setState({email:t,emailError:!1},(()=>{var{email:t}=this.state;("blur"==e.type?!(0,l.DT)(t)||t.includes("mailinator"):!t)&&this.setState({emailError:!0})}))},this.onUpdatetandc=e=>this.setState({tandc:!this.state.tandc}),this.onClosePopUp=()=>{var{wallId:e,wall:t}=this.props;if(document.querySelector("html").style.overflow="auto",this.props.onSitePopup(!1),o.aD){var i,a,s=new URLSearchParams(window.location.search).get("wallKey"),r=o.W7?"".concat(n.UM,"/widget/?wall_id=").concat(null!==(i=null===t||void 0===t||null===(a=t.ThemeInfo)||void 0===a?void 0:a.wallId)&&void 0!==i?i:e):"".concat(n.GR,"/").concat(e),l=s?"".concat(r).concat(o.W7?"&":"?","wallKey=").concat(s):r;window.location.href=l}},this.termsCheck=e=>this.setState({is_terms_check:e}),this.connectiontoSelect=e=>this.setState({connectionTo:e,connectionToError:!e}),this.uploadErrorCallback=e=>{this.setState({uploadError:e,fileUpload:!1},(()=>setTimeout((()=>this.setState({uploadError:""})),5e3)))},this.backStepFun=()=>this.setState({step:1}),this.state={submitPost:!0,isOpen:!0,step:1,wall_id:null,name:"",lastName:"",lastNameError:!1,connectionTo:"",connectionToError:!1,termsPolicy:!1,email:"",upload_image:[],tandc:!0,nameError:!1,emailError:!1,submitErrorMessage:null,apiRequest:!1,isActiveIndex:0,isAddMoreActive:!1,submitError:!1,is_terms_check:0,errorClickMore:!1,uploadError:"",rateProduct:0,reviewTitle:"",review:"",rateProductError:!1,reviewTitleError:!1,captionError:!1,layout:(null===e||void 0===e||null===(t=e.wall)||void 0===t||null===(i=t.SnapUp)||void 0===i?void 0:i.Form.type)||1,removedFile:{},formLanguage:null===e||void 0===e?void 0:e.language,aiInput:!1,aiPrompt:"",writeAiReview:!1,aiReadOnly:!0,aiSpinner:!1,aiPromptError:"",isRegenrate:!1,aiPromptCopy:"",fileUpload:!1},this.textAreaRef=(0,s.createRef)()}render(){var e,t,i,a,r,n,c,{isActiveIndex:h,step:u,upload_image:v,formLanguage:_,isAddMoreActive:p,name:g,email:x,tandc:f,nameError:y,emailError:E,apiRequest:S,submitError:k,submitErrorMessage:I,uploadError:T,reviewTitle:P,review:L,rateProductError:R,reviewTitleError:M,captionError:A,layout:D,removedFile:F,aiInput:q,aiPrompt:U,writeAiReview:B,aiReadOnly:O,aiPromptError:W,aiSpinner:z,isRegenrate:H,lastName:Y,lastNameError:G,connectionToError:K,termsPolicy:Z}=this.state,{wall:J,isFreeAdsStatus:Q}=this.props,{Form:X,QrCode:V}=J.SnapUp,$=[1774873].includes(null===J||void 0===J||null===(e=J.ThemeInfo)||void 0===e?void 0:e.ownerId),ee=[2197222].includes(null===J||void 0===J||null===(t=J.ThemeInfo)||void 0===t?void 0:t.wallId),te=[2201411].includes(null===J||void 0===J||null===(i=J.ThemeInfo)||void 0===i?void 0:i.wallId),ie=ee||te?ee?{title:"What to include:",list1:"A short story or quote (1\u20133 sentences) about your 1\ufe0f\u20e3 (e.g., \u201cI\u2019m the 1\ufe0f\u20e3 who donates to support T1D research breakthroughs.\u201d)",list2:"A photo of yourself or something that represents your story",note:"Note:",noteDes:"By submitting, you agree to have your story and photo displayed publicly on our digital social media wall.",tnd:"I agree to allow Breakthrough T1D Canada to contact me by email  regarding research and advocacy updates, announcements, events and fundraising activities. Your email will not be shared, and you will\n                 always have the option to unsubscribe. See our,",policy:"privacy policy",tndafterlink:" for more details on how we protect your personal information.",connectIt:"Connection to T1D",connectObj:["--Select--","I live with type 1 diabetes","My spouse","My child","Other family member","Friend or Co-Worker","No connection","Prefer not to say"],connectError:"Connection to T1D is required",fname:"First Name",fnameph:"Enter  first Name",fnameError:"First Name is required",lname:"Last Name",lnameph:"Enter  Last Name",lnameError:"Last Name is required"}:{title:"\xc0 inclure :",list1:"Une courte histoire ou une citation (1 \xe0 3 phrases) sur vous 1 (par exemple \xab Je suis 1 qui fait un don pour soutenir les perc\xe9es de la recherche sur le DT1 \xbb)",list2:"Une photo de vous ou de quelque chose qui repr\xe9sente votre histoire",note:"Remarque :",noteDes:"En envoyant ce formulaire, vous acceptez que votre histoire et votre photo soient affich\xe9es spubliquement sur notre mur social num\xe9rique.",tnd:"J'accepte que Perc\xe9e DT1 Canada communique avec moi par courriel au sujet des mises \xe0 jour sur la recherche et la d\xe9fense d\u2019int\xe9r\xeats, les annonces, les \xe9v\xe9nements et les activit\xe9s de collecte de fonds. Votre adresse de courriel ne sera pas partag\xe9e et vous aurez toujours la possibilit\xe9 de vous d\xe9sabonner. Consultez notre",policy:"politique de confidentialit\xe9",tndafterlink:"pour plus de d\xe9tails sur la fa\xe7on dont nous prot\xe9geons vos renseignements personnels.",connectIt:"Lien avec le DT1",connectObj:["--S\xe9lectionner--","Je vis avec le diab\xe8te de type 1","Ma(mon) conjointe(e)","Mon enfant","Membre de la famille","Ami(e) ou coll\xe8gue de travail","Aucun lien","Pr\xe9f\xe8re ne pas repondre"],connectError:"Le lien avec le DT1 est requis",fname:"Pr\xe9nom",fnameph:"Entrez le pr\xe9nom",fnameError:"Le pr\xe9nom est requis",lname:"Nom",lnameph:"Entrez le nom de famille",lnameError:"Le nom de famille est requis"}:null,ae={backgroundColor:"#eff2f3"!==(null===X||void 0===X||null===(a=X.background)||void 0===a?void 0:a.color)?null===X||void 0===X||null===(r=X.background)||void 0===r?void 0:r.color:"rgba(0,0,0,0.7)",backgroundImage:null!==X&&void 0!==X&&null!==(n=X.background)&&void 0!==n&&n.url?"url(".concat(X.background.url,")"):null},{onClosePopUp:se}=this,{titleLabel:re,titlePh:le,reviewLabel:ne,aiReviewPh:oe,reviewPh:ce,writeWithAiBtn:de,generateAiBtn:he,generateBtn:ue,ratingError:me,titleError:ve,aiPH:_e,reviewError:pe,reviewLimitError:ge,nameLabel:xe,namePh:fe,nameErrorinput:we,emailLabel:be,emailPh:je,emailErrorinput:Ne,emailErrorvalid:Ce,termsText:ye,termsLT:Ee,termsError:Se,submitErromsg:ke,captionLabel:Ie,captionPh:Te,captionErrorInput:Pe,captionLimitError:Le,captionReviewPh:Re}=_;return(0,d.jsx)("div",{className:"t_modal".concat(Q?" t_brand_":""),children:(0,d.jsx)("div",{className:"t_modal_wrap",style:ae,children:Object.keys((null===J||void 0===J?void 0:J.SnapUp)||{}).length&&(null!==V&&void 0!==V&&V.status||null!==X&&void 0!==X&&X.status)?(0,d.jsx)("div",{className:"t_modal_container",children:3==u?(0,d.jsx)(N,{wall:J,onClosePopUp:se,type:"check",msg:_}):(0,d.jsxs)("div",{className:"t_modal_content",children:[(0,d.jsx)(C,{logo:null===X||void 0===X?void 0:X.logo.url}),(0,d.jsx)("div",{className:"t_m_close_btn tb__icon tb-close-alt",onClick:se,children:(0,d.jsx)("div",{})}),X.title?(0,d.jsx)("div",{className:"t_m_title",children:X.title}):null,X.subTitle?(0,d.jsx)("div",{className:"t_m_subtitle ".concat(ie?"subtitle-mb":""),children:X.subTitle}):null,1!=D||$?null:(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsx)(m,{isActiveIndex:h,isAddMoreActive:p,item:v[h],addRatings:this.addRatings}),R?(0,d.jsxs)("div",{className:"t_f_error t_text_center",children:[" * ",me,"."]}):null]}),ie?(0,d.jsxs)("div",{className:"t_m_subcontent",children:[(0,d.jsx)("div",{className:"t_m_subcontent_title",children:(0,d.jsx)("strong",{children:null===ie||void 0===ie?void 0:ie.title})}),(0,d.jsxs)("ul",{className:"t_m_sublist",children:[(0,d.jsx)("li",{children:null===ie||void 0===ie?void 0:ie.list1}),(0,d.jsx)("li",{children:null===ie||void 0===ie?void 0:ie.list2})]}),(0,d.jsxs)("div",{className:"t_m_subnote",children:[(0,d.jsx)("b",{children:null===ie||void 0===ie?void 0:ie.note})," ",ie.noteDes," "]})]}):null,1!=D||o.aD?null:(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_label_",children:[" ",$?"Trip Title":re," ",(0,d.jsx)("div",{className:"t_t_danger",children:"*"})]}),(0,d.jsx)("input",{type:"text",className:"t_from_input ".concat(M?"t_f_invalid":""),placeholder:$?"Enter Trip Title":le,onChange:this.onChangeReviewTitle,value:P}),M?(0,d.jsxs)("div",{className:"t_f_error",children:[" * ",$?"Trip Title is required":ve,"."]}):null]}),(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_label_",children:[$?"Describe your trip to NYC.":2==D?Ie:ne,"  ",(0,d.jsx)("div",{className:"t_t_danger",children:"*"})]}),B?(0,d.jsxs)("div",{className:"t_f_textarea ai_input_wrap",children:[(0,d.jsxs)("div",{className:"t_f_ai_input_wrap_",children:[(0,d.jsx)("div",{className:"t_f_ai_ico",children:(0,d.jsx)(b,{})}),(0,d.jsx)("textarea",{id:"ai_input",ref:this.textAreaRef,className:"t_from_ai_input t_f_textarea",value:U,onChange:this.aiPromptFun,placeholder:_e,readOnly:O,disabled:O}),(0,d.jsxs)("div",{className:"t_f_ai_btn_wrap",children:[(0,d.jsx)("div",{className:"t_f_ai_btn",onClick:this.aiPromptEditFun,children:(0,d.jsx)("div",{className:"tb__icon tb-edit"})}),(0,d.jsx)("div",{className:"t_f_ai_btn",onClick:()=>this.setState({writeAiReview:!1,aiPrompt:"",review:"",aiPromptError:"",aiInput:!1,isRegenrate:!1}),children:(0,d.jsx)("div",{className:"tb__icon tb-close-alt"})})]})]}),(0,d.jsxs)("div",{className:"t_f_ai_res_wrap",children:[z?(0,d.jsxs)("div",{className:"t_f_skel_wrap",children:[(0,d.jsx)("div",{className:"t_f_s_bar_wrap",children:(0,d.jsx)("div",{className:"t_f_s_bar",children:(0,d.jsx)("div",{})})}),(0,d.jsx)("div",{className:"t_f_s_bar_wrap",children:(0,d.jsx)("div",{className:"t_f_s_bar",children:(0,d.jsx)("div",{})})}),(0,d.jsx)("div",{className:"t_f_s_bar_wrap",style:{maxWidth:"50%"},children:(0,d.jsx)("div",{className:"t_f_s_bar",children:(0,d.jsx)("div",{})})})]}):null,(0,d.jsx)("textarea",{className:"t_from_textarea ".concat(A?"t_f_invalid":""),value:L,onChange:this.addCaption}),(0,d.jsx)("div",{className:"t_f_p_btn t_f_rg_btn t_f_l_btn".concat(H?"":" tb_disabled"),onClick:()=>!!H&&this.aiReviewFun(!1),children:ue})]})]}):(0,d.jsxs)("div",{className:"t_f_ai_res_wrap",children:[q?(0,d.jsx)("textarea",{className:"t_from_textarea t_f_ai_prompt",value:U,onChange:this.aiPromptFun,placeholder:2==D?Re:oe}):(0,d.jsx)("textarea",{className:"t_from_textarea ".concat(A?"t_f_invalid":""),placeholder:"".concat($?"Describe your trip to NYC here":2==D?Te:ce),value:L,onChange:this.addCaption}),[53,61].includes(J.ThemeInfo.planId)?null:(0,d.jsxs)(d.Fragment,{children:[q?(0,d.jsx)("div",{className:"t_f_ai_ico_text",children:(0,d.jsx)(b,{})}):"",q?(0,d.jsx)("div",{className:"t_f_ai_btn_wrap",children:(0,d.jsx)("div",{className:"t_f_ai_btn",onClick:()=>this.setState({aiInput:!1,aiPromptError:""}),children:(0,d.jsx)("div",{className:"tb__icon tb-close-alt"})})}):"",q?(0,d.jsxs)("div",{className:"t_f_p_btn t_f_p_btn_gr t_f_ai_btn".concat(U.length<=0&&q?" tb_disabled":""),onClick:this.aiReviewFun,children:[(0,d.jsx)("div",{className:"t_f_ai_ico_btn",children:(0,d.jsx)(j,{})}),he]}):(0,d.jsxs)("div",{className:"t_f_p_btn t_f_p_btn_gr t_f_ai_btn".concat(U.length<=0&&q?" tb_disabled":""),onClick:()=>this.setState({aiInput:!0}),children:[(0,d.jsx)("div",{className:"t_f_ai_ico_btn",children:(0,d.jsx)(j,{})})," ",de]})]})]}),W?(0,d.jsxs)("div",{className:"t_f_error",children:[" * ",W]}):null,A?(0,d.jsxs)("div",{className:"t_f_error",children:[" * ",String(L).length<=0?"".concat($?"Describe your trip to NYC is required":2==D?Pe:pe):2==D?Le:ge]}):null]}),(0,d.jsxs)("div",{className:"t_f_group",children:[Object.keys(_).length?(0,d.jsxs)("div",{className:"t_f_upload",children:[v&&v.length>0?v&&v.map(((e,t)=>e.thumbnail?(0,d.jsxs)("div",{className:"t_m_up_img_wrap",onClick:this.onClickToEdit(t),children:[e.thumbnail?(0,d.jsxs)("div",{className:"t_m_up_img_in",children:[(0,d.jsx)("img",{className:"t_m_up_img",src:e.thumbnail,height:80,width:80,alt:""}),[3,5].includes(e.type)?(0,d.jsx)("div",{className:"t_m_vi_ico tb__icon tb-play",children:(0,d.jsx)("div",{})}):null]}):null,(0,d.jsx)("div",{className:"t_m_remove_btn tb__icon tb-close-alt",onClick:()=>this.onClickToRemove(e,t),children:(0,d.jsx)("div",{})})]},t):null)):null,(0,d.jsx)(s.Suspense,{fallback:(0,d.jsx)("div",{className:"t_m_upload",children:"Loading..."}),children:(0,d.jsx)(w,{getContent:_,checkUpload:this.checkUpload,isActiveIndex:h,addPostImage:this.addPostImage,uploadErrorCallback:this.uploadErrorCallback,upload_image:v,removedFile:F})})]}):null,T?(0,d.jsx)("div",{className:"t_f_error",children:T}):null]}),(0,d.jsxs)("div",{className:"t_row_",children:[(0,d.jsx)("div",{className:"t_col_",children:(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_label_",children:[" ",ie?null===ie||void 0===ie?void 0:ie.fname:xe,"  ",(0,d.jsx)("div",{className:"t_t_danger",children:"*"})]}),(0,d.jsx)("input",{type:"text",className:"t_from_input ".concat(y?"t_f_invalid":""),placeholder:ie?null===ie||void 0===ie?void 0:ie.fnameph:fe,onChange:this.onTextName,value:g}),y?(0,d.jsxs)("div",{className:"t_f_error",children:[" ",ie?null===ie||void 0===ie?void 0:ie.fnameError:we," "]}):null]})}),ie?(0,d.jsx)("div",{className:"t_col_",children:(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_label_",children:[" ",null===ie||void 0===ie?void 0:ie.lname,"  ",(0,d.jsx)("div",{className:"t_t_danger",children:"*"})," "]}),(0,d.jsx)("input",{type:"text",className:"t_from_input",placeholder:null===ie||void 0===ie?void 0:ie.lnameph,onChange:this.onTextLstName,value:Y}),G?(0,d.jsxs)("div",{className:"t_f_error",children:[" ",null===ie||void 0===ie?void 0:ie.lnameError," "]}):null]})}):(0,d.jsx)("div",{className:"t_col_",children:(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_label_",children:[" ",be,"  ",(0,d.jsx)("div",{className:"t_t_danger",children:"*"})]}),(0,d.jsx)("input",{type:"text",className:"t_from_input ".concat(E?"t_f_invalid":""),placeholder:je,onChange:this.onTextEmail,value:x}),E?(0,d.jsxs)("div",{className:"t_f_error",children:[" ",0==String(x).trim().length?Ne:(0,l.DT)(x)?"":Ce]}):null]})})]}),ie?(0,d.jsxs)("div",{className:"t_row_",children:[(0,d.jsx)("div",{className:"t_col_",children:(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_label_",children:[" ",be,"  ",(0,d.jsx)("div",{className:"t_t_danger",children:"*"})]}),(0,d.jsx)("input",{type:"text",className:"t_from_input ".concat(E?"t_f_invalid":""),placeholder:je,onChange:this.onTextEmail,value:x}),E?(0,d.jsxs)("div",{className:"t_f_error",children:[" ",0==String(x).trim().length?Ne:(0,l.DT)(x)?"":Ce]}):null]})}),(0,d.jsx)("div",{className:"t_col_",children:(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_label_",children:[" ",null===ie||void 0===ie?void 0:ie.connectIt,"  ",(0,d.jsx)("div",{className:"t_t_danger",children:"*"})]}),(0,d.jsx)("select",{onChange:e=>this.connectiontoSelect(e.target.value),className:"t_from_input",children:null===ie||void 0===ie||null===(c=ie.connectObj)||void 0===c?void 0:c.map(((e,t)=>(0,d.jsx)("option",{value:t?e:"",children:e},t)))}),K?(0,d.jsxs)("div",{className:"t_f_error",children:[" ",null===ie||void 0===ie?void 0:ie.connectError," "]}):null]})})]}):null,[104746].includes(J.ThemeInfo.ownerId)?(0,d.jsxs)("div",{className:"t_f_check_inline",children:[(0,d.jsx)("input",{type:"checkbox",id:"t_accept",className:"t_from_check",onChange:e=>this.termsCheck(e.target.checked?1:0)}),(0,d.jsxs)("div",{className:"t_f_label_wrap",children:[(0,d.jsx)("label",{className:"t_check_label_",htmlFor:"t_accept",children:"I agree to CALM using my story for marketing purposes --"}),(0,d.jsx)("a",{href:X.termsLink,className:"t_tc_link",target:"_blank",children:"click for more information on how your story will be used."})]})]}):(0,d.jsxs)("div",{className:"t_f_group",children:[(0,d.jsxs)("div",{className:"t_f_check_inline",children:[(0,d.jsx)("input",{type:"checkbox",id:"t_accept",className:"t_from_check",value:"accept",onChange:this.onUpdatetandc,checked:f}),(0,d.jsxs)("label",{className:"t_check_label_",htmlFor:"t_accept",children:[ye," ",(0,d.jsx)("a",{href:"".concat("https://taggbox.com/on-site-uploads-content-rights"),className:"t_tc_link",target:"_blank",children:Ee})," *"]})]}),0==f?(0,d.jsxs)("div",{className:"t_f_error",children:["* ",Se]}):null]}),ie?(0,d.jsx)("div",{className:"t_f_group",children:(0,d.jsxs)("div",{className:"t_f_check_inline",children:[(0,d.jsx)("input",{type:"checkbox",id:"t_accept_policy",className:"t_from_check one-slup",onChange:e=>this.setState({termsPolicy:e.target.checked}),checked:Z}),(0,d.jsxs)("label",{className:"t_check_label_",htmlFor:"t_accept_policy",children:["  ",null===ie||void 0===ie?void 0:ie.tnd,(0,d.jsxs)("a",{href:"https://breakthrought1d.ca/privacy-policy/",className:"t_tc_link",target:"_blank",children:[" ",null===ie||void 0===ie?void 0:ie.policy]})," ",null===ie||void 0===ie?void 0:ie.tndafterlink," "]})]})}):null,k?(0,d.jsx)("div",{className:"t_f_group",children:(0,d.jsxs)("div",{className:"t_f_error",children:["* ",I||ke]})}):null,(0,d.jsx)("div",{className:"t_f_group t_text_center",children:(0,d.jsx)("div",{className:"t_f_p_btn ".concat(S?" t_f_btn_spinner":""),onClick:()=>{this.onSubmitPostData(this.state.fileUpload)},children:X.button.text})})]})}):null})})}}const E=(0,r.Ng)((e=>{var t,i;return null!==(t=e.modalPop)&&void 0!==t&&t.onSiteIsShowPopUp&&(document.querySelector("html").style.overflow="hidden"),{modalPop:e.modalPop,language:null===(i=e.appData)||void 0===i?void 0:i.reviewHubLanguage}}),(e=>({onSitePopup:t=>e((0,c.b8)(t)),onsiteTokenUpdate:t=>e((0,c.du)(t)),themeByWallID:(t,i)=>e((0,f.IE)(t,i))})))(y)},76506:(e,t,i)=>{i.d(t,{C9:()=>_,Cq:()=>v,HI:()=>u,Ph:()=>b,S2:()=>f,TW:()=>C,Uy:()=>d,fF:()=>p,hZ:()=>g,hz:()=>m,p5:()=>j,pD:()=>y,pj:()=>N,sl:()=>w,um:()=>h,wG:()=>x});var a=i(66345),s=i(80415),r=i(296),l=i(68553),n=[],o=!1,c=new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(a.$x),Productdomain:a.QR}),d=e=>{var t;return null===(t=document.getElementById("tb_onsite_btn_id"))||void 0===t?void 0:t.classList.toggle("tb_onsite_btn_disabled",1===e)},h=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a.aD||"reviewHub"==e)return window.parent.postMessage({type:e,owerId:i},"*");var s={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")};null===(t=s[e])||void 0===t||t.call(s)},u=e=>{try{n.push(e)}catch(t){console.log(t)}},m=e=>e&&""!==e&&!e.includes("ui-avatars"),v=e=>{if(!e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,t),2),sizeText:["Bytes","KB","MB","GB","TB"][t]}},_=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,p=e=>{var t,{wall:i}=r.A.getState().appData,a=[1778189].includes(null===i||void 0===i||null===(t=i.ThemeInfo)||void 0===t?void 0:t.ownerId)?"fr":"en";if(!e||isNaN(e))return"fr"===a?"date invalide":"invalid date";var s=new Date(1e3*e),l=new Date-s;if(isNaN(l)||l<0)return"fr"===a?"date invalide":"invalid date";var n={en:{justNow:"just now",year:"year",years:"years",month:"month",months:"months",week:"week",weeks:"weeks",day:"day",days:"days",hour:"hour",hours:"hours",minute:"minute",minutes:"minutes",prefix:"",suffix:" ago"},fr:{justNow:"\xe0 l\u2019instant",year:"an",years:"ans",month:"mois",months:"mois",week:"semaine",weeks:"semaines",day:"jour",days:"jours",hour:"heure",hours:"heures",minute:"minute",minutes:"minutes",prefix:"il y a ",suffix:""}},o=n[a]||n.en,c=[{single:o.year,plural:o.years,ms:31536e6},{single:o.month,plural:o.months,ms:2592e6},{single:o.week,plural:o.weeks,ms:6048e5},{single:o.day,plural:o.days,ms:864e5},{single:o.hour,plural:o.hours,ms:36e5},{single:o.minute,plural:o.minutes,ms:6e4}];if(l<6e4)return o.justNow;var d=c.find((e=>{var{ms:t}=e;return l>=t})),h=Math.floor(l/d.ms);return"".concat(o.prefix).concat(h," ").concat(h>1?d.plural:d.single).concat(o.suffix)},g=e=>3==e?s.lY:s.TF,x=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",f=["localhost","widget","wall_id="].every((e=>(0,a.vq)(e)))?"taggbox_main":["".concat(a.Xg,".").concat(a.IF),"".concat(a.Xg).concat(a.t6).concat(a.IF),"".concat(a.Xg,"s.").concat(a.IF)].some((e=>(0,a.vq)(e)))?"tag_main__root":a.HY?"taggShopRoot":"taggbox_main",w=e=>{e=e||0;var t=Math.floor(Math.log10(e)/3)||0;if(0===t)return e.toString();var i=(e/Math.pow(1e3,t)).toFixed(2),a=parseFloat(i)+["","K","M","B","T"][t];return i&&"NaN"!=i?a:0},b=e=>a.MH?e:atob(e),j=(e,t,i)=>e&&e.length>0?e.findIndex((e=>e.id===t)):i,N=()=>{try{var{wall:e}=r.A.getState().appData,{webId:t,wallId:i,ownerId:s}=e.ThemeInfo;o||(window.addEventListener("beforeunload",(()=>{if(0!==n.length){var e=n.reduce(((e,t)=>e+t),0);e>0?fetch(a.KQ,{method:"POST",headers:c,body:JSON.stringify({action:1,model:null!==l.Ex&&void 0!==l.Ex&&l.Ex.includes("website")?"website":"wall",playCount:n.length,wall:a.aD?i:t,playTime:e,owner:s}),keepalive:!0}).finally((()=>(n=[],o=!1))):(n=[],o=!1)}})),o=!0)}catch(d){console.error(d)}},C=e=>new Promise(((t,i)=>Object.assign(new Image,{onload:function(){t({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>i(new Error("Image loading error: ".concat(e.message))),src:e}))),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var i=0,a=0,s="",l=0,n="",o=[];if(t)return e.map((e=>{i+=e.averageReviews*e.totalReviews,a+=e.totalReviews,s="Overall",l=0,n=e.color,o=(null===e||void 0===e?void 0:e.reviewList)||[]})),{network:{name:s,avgRate:isNaN(i/a)?0:(i/a).toFixed(1),totalReviews:a,color:n,reviewList:o},activeId:l};var c,{wall:d}=r.A.getState().appData,h=null===d||void 0===d||null===(c=d.Banner)||void 0===c?void 0:c.title_font_color;return e.map((t=>{var r;i+=t.averageReviews*t.totalReviews,a+=t.totalReviews,s=e.length>1?"Overall":t.name,l=e.length>1?0:t.id,h=e.length>1?null===d||void 0===d||null===(r=d.Banner)||void 0===r?void 0:r.title_font_color:t.color,o=e.length>1?(e=>{try{var t=new Map;return e.forEach((e=>{e.Network.reviewList.forEach((e=>{t.set(e.rating,(t.get(e.rating)||0)+e.count)}))})),Array.from(t,(e=>{var[t,i]=e;return{rating:t,count:i}}))}catch(i){}})(e):(null===t||void 0===t?void 0:t.reviewList)||[]})),{network:{name:s,avgRate:isNaN(i/a)?0:(i/a).toFixed(1),totalReviews:a,color:h,reviewList:o},activeId:l}}catch(u){console.log("ex",u)}}}}]);