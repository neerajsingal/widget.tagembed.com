"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[629,3671],{30629:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(9950),o=i(48400),l=i(10300),n=i(52867),a=i(93152),d=i(66345),r=i(44414);class c extends s.PureComponent{constructor(){super(...arguments),this.handleResize=()=>this.getActiveWrapperSize(2),this.getActiveWrapperSize=e=>{var t=0,i=0,{SnapUp:s,ThemeInfo:o,sliderClass:l}=this.props,{QrCode:a,Form:r}=s;if(o.IsUser&&!(0,n.Fr)()&&(a.status||r.status))var c=setInterval((()=>{var s=document.querySelector(".".concat(l));if(s){var n=s.getBoundingClientRect(),a=parseInt(n.width),r=parseInt(n.height);if(a==t&&r==i&&a>0)clearInterval(c),this.props.updateContainerSize(a,r,1);else{t=a,i=r,this.props.updateContainerSize(a,r);var h=[80,47,16,81,60],p=[80,47,16].includes(o.id)?1e3:3e3;setTimeout((()=>{2!=e&&(d.sb||h.includes(o.id))&&this.props.updateContainerSize(a,r,2),clearInterval(c)}),p)}}else console.log("No active wrapper found"),clearInterval(c)}),10)},this.onSitePopupButton=e=>{(0,n.qK)(e)&&this.props.onSitePopup(!0)}}componentDidMount(){var{SnapUp:e,ThemeInfo:t}=this.props,{QrCode:i,Form:s}=e;t.IsUser&&!(0,n.Fr)()&&(i.status||s.status)&&(this.getActiveWrapperSize(1),window.addEventListener("resize",this.handleResize))}componentWillUnmount(){var{SnapUp:e,ThemeInfo:t}=this.props,{QrCode:i,Form:s}=e;t.IsUser&&!(0,n.Fr)()&&(i.status||s.status)&&window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){var t,i,s,o,l,n,a,r,c,h,p,u,v,_,b,m,w,x,S,g,f,C,y,j,I,N,z,T,k,q,P;if(d.sb){var{ThemeStyle:L,CardStyle:R}=this.props;((null===(t=e.CardStyle)||void 0===t||null===(i=t.style)||void 0===i?void 0:i.ratio)!=(null===R||void 0===R||null===(s=R.style)||void 0===s?void 0:s.ratio)||(null===(o=e.ThemeStyle)||void 0===o||null===(l=o.column)||void 0===l?void 0:l.desktop)!=(null===L||void 0===L||null===(n=L.column)||void 0===n?void 0:n.desktop)||(null===(a=e.ThemeStyle)||void 0===a||null===(r=a.column)||void 0===r?void 0:r.mobile)!=(null===L||void 0===L||null===(c=L.column)||void 0===c?void 0:c.mobile)||(null===(h=e.CardStyle)||void 0===h||null===(p=h.style)||void 0===p?void 0:p.size)!=(null===R||void 0===R||null===(u=R.style)||void 0===u?void 0:u.size)||(null===(v=e.CardStyle)||void 0===v||null===(_=v.author)||void 0===_?void 0:_.status)!=(null===R||void 0===R||null===(b=R.author)||void 0===b?void 0:b.status)||(null===(m=e.CardStyle)||void 0===m||null===(w=m.icon)||void 0===w?void 0:w.status)!=(null===R||void 0===R||null===(x=R.icon)||void 0===x?void 0:x.status)||(null===(S=e.CardStyle)||void 0===S||null===(g=S.content)||void 0===g?void 0:g.status)!=(null===R||void 0===R||null===(f=R.content)||void 0===f?void 0:f.status)||(null===(C=e.CardStyle)||void 0===C||null===(y=C.content)||void 0===y?void 0:y.lines)!=(null===R||void 0===R||null===(j=R.content)||void 0===j?void 0:j.lines)||(null===(I=e.CardStyle)||void 0===I?void 0:I.actionStatus)!=(null===R||void 0===R?void 0:R.actionStatus)||(null===(N=e.CardStyle)||void 0===N||null===(z=N.globalCTA)||void 0===z?void 0:z.status)!=(null===R||void 0===R||null===(T=R.globalCTA)||void 0===T?void 0:T.status)||(null===(k=e.CardStyle)||void 0===k||null===(q=k.style)||void 0===q?void 0:q.margin)!=(null===R||void 0===R||null===(P=R.style)||void 0===P?void 0:P.margin))&&this.getActiveWrapperSize(2)}}render(){var e,{SnapUp:t,ThemeInfo:i,CardStyle:s,postSize:l,isClass:a,qrCardWidth:d,qrCardHeight:c,isLoad:h}=this.props,{QrCode:p,Form:u}=t,v=null!==p&&void 0!==p&&p.position?" tb_pos-".concat(p.position):null,_=[80,81,16,47].includes(i.id),b=(null===s||void 0===s||null===(e=s.style)||void 0===e?void 0:e.margin)/2,m=(e,t)=>(0,r.jsxs)("div",{className:"tb_onsite_upload_btn_wrap ".concat(null!==i&&void 0!==i&&i.isRevieview?"tb_custom_qr_style":null,"   ").concat(v),children:[null!==i&&void 0!==i&&i.isRevieview?(0,r.jsx)("div",{className:"tb_custom_qr_heading",children:"Be the first one to review"}):null,(0,r.jsxs)("div",{tabIndex:0,role:"button","aria-label":"Open Review Hub popup",onKeyDown:e=>this.onSitePopupButton(e),onClick:()=>this.onSitePopupButton(),className:"tb_onsite_upload_btn",children:[p.text?(0,r.jsx)("div",{className:"tb_snap_btn_bg",children:(0,r.jsx)("div",{})}):null,(0,r.jsx)("div",{className:"tb_onsite_btn",children:p.status&&!(0,n.vq)("demo")?(0,r.jsxs)("div",{className:"tb_onsite_qr_btn_wrap",children:[1==p.status?(0,r.jsx)("div",{className:"tb_onsite_qr_code",children:(0,r.jsx)(o.Ay,{level:"L",size:60,value:"".concat((0,n.dq)()).concat(i.webId,"?").concat(i.webId!=i.wallId?"website=true&":"","onsite-upload"),fgColor:e,bgColor:t})}):null,p.text?(0,r.jsx)("div",{className:"tb_onsite_btn_txt tb-cTBfont-".concat(p.style.variant),children:p.text}):""]}):(0,r.jsx)("div",{className:"tb_onsite_btn_wrap_text",children:p.text?(0,r.jsxs)("div",{className:"tb_onsite_btn_txt tb-cTBfont-".concat(p.style.variant),children:[i.IsUser||(0,n.vq)("demo")||null!==i&&void 0!==i&&i.isRevieview?(0,r.jsx)("div",{className:"tb_onsite_btn_icon_list onsite_icon_vertical",children:(0,r.jsx)("div",{className:"tb__icon",children:(0,r.jsx)("svg",{role:"img","aria-label":"Close icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",fill:"#fff",width:"28",height:"28",children:(0,r.jsx)("path",{d:"M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"})})})}):null,p.text]}):""})})]})]});return p.status||u.status?![20,5,19,3,83,16,47,60,79,80,81,4].includes(i.id)||!i.IsUser||null!==i&&void 0!==i&&i.isRevieview||[47,16,60,81,80].includes(i.id)&&(0,n.Fr)()?(0,r.jsx)(m,{color:"#000",background:"#fff"}):h?(0,r.jsx)("div",{tabIndex:0,role:"button","aria-label":"Open Review Hub popup",onKeyDown:e=>this.onSitePopupButton(e),onClick:()=>this.onSitePopupButton(),style:{width:d?"".concat(d,"px"):"".concat(l,"%"),height:c?"".concat([81].includes(i.id)?c-0:c,"px"):"auto",padding:b},className:" ".concat(a||null,"  ").concat([4].includes(i.id)?"":"tb_onsite_upload_btn_wrap"," tb-qr-card"),children:(0,r.jsx)("div",{className:_?"qr_relative":"w-100",children:(0,r.jsxs)("div",{className:"tb_review_hub_wrap ".concat([81,80].includes(i.id)?"tb_review_hub_wrap_slide":""," ").concat([4].includes(i.id)?"qr-padding-0":""," "),children:[p.status&&!(0,n.vq)("demo")?(0,r.jsx)("div",{className:"tb_review_hub_qr",style:{marginBottom:p.text?"20px":"0"},children:(0,r.jsx)(o.Ay,{level:"L",value:"".concat((0,n.dq)()).concat(i.webId,"?").concat(i.webId!=i.wallId?"website=true&":"","onsite-upload"),fgColor:"#000",bgColor:"#fff"})}):null,!p.status||(0,n.vq)("demo")?(0,r.jsx)("div",{className:"tb_onsite_btn_icon_list",style:{marginBottom:p.text?"20px":"0"},children:(0,r.jsx)("div",{className:"tb__icon tb-plus-svg",children:(0,r.jsx)("svg",{role:"img","aria-label":"Add more icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",fill:"#fff",width:"18",height:"18",children:(0,r.jsx)("path",{d:"M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"})})})}):null,p.text?(0,r.jsx)("div",{className:"tb_review_hub_txt",children:p.text}):null]})})}):(0,r.jsx)("img",{src:"https://cloud.tagbox.com/react-app/media/transparent-min.png",alt:"Review QrCode",width:d,height:c}):null}}const h=(0,l.Ng)((e=>({modalPop:e.modalPop})),(e=>({onSitePopup:t=>e((0,a.b8)(t))})))(c)},43671:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var s=i(89379),o=i(9950),l=i(66345),n=i(10300),a=i(53556),d=i(61302),r=i(21850),c=i(52867),h=i(58365),p=i(91697),u=i(44414),v=(0,o.lazy)((()=>Promise.resolve().then(i.bind(i,92663)))),_=(0,o.lazy)((()=>i.e(7713).then(i.bind(i,47713)))),b=(0,o.lazy)((()=>i.e(420).then(i.bind(i,80420))));const m=e=>{var{Post:t,CardStyle:i,index:s,ThemeInfo:n,onClickToCTA:a,ThemeStyle:d,ProductSetting:r,clickToShowPopUp:m,onClickPopUpSlider:w,isVisible:x}=e,S=81!=n.id,g=l.MH?"tb_ht_color_overlay":"tb_ht_post_overlay-dark",f={backgroundColor:i.style.background},C=S?"50%":null,y=!!(i.shopText&&t.products.length&&n.isShoppable);(0,o.useEffect)((()=>{t.isPopUp&&w(s,t)}),[s,t.isPopUp,t]);var j=(e,t,i)=>{(0,c.qK)(e)&&m(t,i)(e)};return(0,u.jsx)(h.A,{children:e=>{var l,{ref:a,inView:h}=e;return(0,u.jsx)("div",{id:"tb_ht_id-".concat(t.id),className:"tb_ht_post_wrapper",role:"article",ref:a,style:{padding:i.style.margin/2,opacity:h?1:0,transition:h?"opacity .5s ease-in-out":""},"tb-network":t.network.id,"tb-product":t.isShopIcon?1:t.isHotspot?2:0,"post-id":t.referenceId?t.referenceId:t.id,"feed-id":t.feedId,children:(0,u.jsx)("div",{role:"button",tabIndex:0,className:"tb_ht_post_in",style:{borderRadius:C},"aria-label":"".concat((0,p.Oi)(t.networkId)," post: ").concat((0,c._y)(t.content.text)||"View post"," \u2013 opens in modal"),onClick:e=>j(e,s,t),onKeyDown:e=>j(e,s,t),children:(0,u.jsxs)("div",{className:"tb_ht_post_media_wrapp",children:[(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(b,{Post:t,CardStyle:i,ProductSetting:r,ThemeStyle:d,ThemeInfo:n,index:s,inView:!0,isVisible:x},s)}),(0,u.jsxs)("div",{className:"tb_ht_post_details",children:[(null===i||void 0===i||null===(l=i.icon)||void 0===l?void 0:l.status)&&(0,u.jsx)("div",{className:"tb_ht_social_",children:(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(v,{networkClass:"tb_ht_social_ico_",networkId:t.networkId,iconStyle:i.icon})})}),y&&(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(_,{CardStyle:i,mode:1,btnClass:"tb_ht_btn_wrap"})})]}),(0,u.jsx)("div",{className:"tb_ht_post_overlay ".concat(g),style:f,"aria-hidden":"true",children:(0,u.jsx)("div",{})})]})})})}})};i(61038);var w=i(30629);class x extends o.Component{constructor(e){super(e),this.requestData=()=>{var{appendData:e,ThemeInfo:t,ThemeStyle:i,CardStyle:s,hasMoreData:o,nextData:n,containerSize:a,loaderData:d}=this.props,r=(s.minimumWidth||150)+10;o&&i.autoScrollStatus&&!d.isShowMoreLoading&&n(l.aD?t.wallId:t.webId,Math.floor(Date.now()/1e3),(0,c.Ci)(a.width,i.column,r),e.networkID,e.after,e.heightEvent)},this.handleMoved=e=>{var{perPage:t}=e.options,i=e.index,s=i+t,o=e.Components.Slides.get().slice(i,s).map((e=>Number(e.slide.dataset.id)));this.setState((e=>({visibleIds:[...new Set(o)]})))},this.updateContainerSize=(e,t,i)=>{if(this.containerRef.current){if(2!=i){var o=0,l=0;Object.values(this.inputRefs).forEach((e=>{var t,i=null===e||void 0===e||null===(t=e.splide)||void 0===t?void 0:t.root;if(i){var s=i.querySelector(".splide__slide");o=s?s.offsetHeight:0,l=s?s.offsetWidth:0}})),this.setState({containerWidth:this.containerRef.current.offsetWidth,qrcardSize:(0,s.A)((0,s.A)({},this.state.qrcardSize),{},{width:l||e,height:o||this.containerRef.current.offsetHeight||t})})}i&&this.setState({isLoad:!0})}},this.autoScrollSlider=e=>{var t=e.index;e.length-t===e._o.perPage&&this.requestData()},this.handleResize=()=>this.setState({resizeKey:Math.random()}),this.inputRefs={},this.containerRef=o.createRef(),this.isDragging=!1,this.state={qrcardSize:{width:0,height:0},containerWidth:0,isUpdate:0,resizeKey:0,isLoad:!1,visibleIds:[]}}componentDidMount(){setTimeout((()=>{var e,t,i,s,o=document.querySelectorAll(".splide__slide");(o&&o.forEach((e=>{e.removeAttribute("aria-hidden"),e.removeAttribute("role")})),null!==(e=this.inputRefs)&&void 0!==e&&null!==(t=e.taggbox_main)&&void 0!==t&&t.splide)&&this.handleMoved(null===(i=this.inputRefs)||void 0===i||null===(s=i.taggbox_main)||void 0===s?void 0:s.splide)}),100),this.props.loadBranding(),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){var{postData:e,completeDataObject:t,CardStyle:i,ThemeStyle:o,ThemeInfo:l,parentID:n,onClickToCTA:r,onClickPopUpSlider:h,containerSize:p,ProductSetting:v,clickToShowPopUp:_,SnapUp:b}=this.props,{QrCode:x,Form:S}=b,{qrcardSize:g,containerWidth:f,resizeKey:C,isLoad:y,visibleIds:j}=this.state,I=o.slide.autoSlide,N=o.slide.slideDuration,z=o.autoScrollStatus,T=n,k={},q=(1===z||!Object.keys(k).length)&&"slide",P=(i.minimumWidth||150)+10,L=(0,c.Ci)(p.width,o.column,P),R=(0,s.A)((0,s.A)({},k),{},{grid:{rows:1},type:1!==z&&q,rewind:!0,rewindSpeed:1e3,interval:1===I&&parseInt(N)>0?1e3*parseInt(N):5e3,perPage:L,perMove:1,gap:0,autoplay:1===I,padding:0,pagination:!1,arrows:!0}),U=e.length<10?Array.from({length:10},((t,i)=>e[i%e.length])):e,D=l.IsUser&&!(0,c.Fr)()&&(x.status||S.status);return""!=n?(0,u.jsxs)("div",{ref:this.containerRef,className:"tb_ht_post_container ".concat(D?"tb_post_container_qr":null),children:[D?(0,u.jsx)("div",{style:{width:g.width},children:(0,u.jsx)("div",{className:"fixed-qr-card",style:{padding:0},children:(0,u.jsx)(w.default,{updateContainerSize:this.updateContainerSize,CardStyle:i,ThemeStyle:o,ThemeInfo:l,SnapUp:b,postSize:100,qrCardWidth:g.width,qrCardHeight:g.height,isLoad:y,sliderClass:"tb_ht_post_in"})})}):null,(0,u.jsx)("div",{style:{width:D?"".concat(f-g.width,"px"):"100%"},children:(0,u.jsxs)(a.eB,{onMoved:this.handleMoved,hasTrack:!1,className:"tb_ht_post_slider  ".concat(D?"tb_post_slider_qr":" "," ").concat(60==l.id?"tb_ht_post_slider_story":"tb_ht_post_slider_review_hub"," "),options:R,extensions:{Grid:d.x},ref:e=>this.inputRefs[T]=e,onMove:this.autoScrollSlider,children:[(0,u.jsx)("div",{className:"splide__arrows splide__arrows--ltr tb_ht_arrow_wrapper_",children:(0,u.jsx)("div",{tabIndex:0,style:{display:y||!D?"flex":"none"},className:"tb_ht_arrow splide__arrow splide__arrow--prev tb_ht_arrow tb_ht_arrow_left__ tb__icon tb-arrow-left-alt ".concat(D?"left-arrow-wrapper":null),role:"button","aria-label":"Go to previous slide",children:(0,u.jsx)("div",{})})}),(0,u.jsx)("div",{className:"splide__track",children:(0,u.jsx)("div",{className:"splide__list",children:(o.row>1&&1!==U.length&&U.length%2!==0?U.pop():U)&&U&&U.length>0&&U.map(((e,s)=>{var a=t[e];return e?(0,u.jsx)("div",{className:"splide__slide tb_".concat(a.id),"data-id":a.id,p_id:n,children:(0,u.jsx)(m,{isVisible:j.includes(e),onClickToCTA:r,onClickPopUpSlider:h,Post:a,index:s,ProductSetting:v,clickToShowPopUp:_,CardStyle:i,ThemeStyle:o,ThemeInfo:l})},s):(0,u.jsx)("div",{className:"splide__slide tb_".concat(0),"data-id":0,p_id:0},"")}))})}),(0,u.jsx)("div",{className:"splide__arrows splide__arrows--ltr tb_ht_arrow_wrapper_",children:(0,u.jsx)("div",{tabIndex:0,className:"tb_ht_arrow splide__arrow splide__arrow--next tb_ht_arrow_right__ tb__icon tb-arrow-right-alt",role:"button","aria-label":"Go to next slide",children:(0,u.jsx)("div",{})})})]},C)})]}):null}}const S=(0,o.memo)((0,n.Ng)((e=>({loaderData:e.loaderData})),(e=>({nextData:(t,i,s,o,l,n,a,d)=>e((0,r.wF)(t,i,s,o,l,n,a,d))})))(x))}}]);