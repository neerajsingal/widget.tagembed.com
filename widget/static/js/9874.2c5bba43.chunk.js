"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[9874],{89874:(t,o,e)=>{e.r(o),e.d(o,{default:()=>_});var l=e(89379),c=e(9950),n=e(10300),i=e(1823),s=e(21850),a=e(82652),d=e(44414);const p=(0,c.memo)(t=>{let{item:o}=t;const e=o.discount>0&&o.discount!==o.price,l=o.discount>0?o.discount:o.price;return(0,d.jsxs)("a",{hotspot:1,href:o.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,d.jsx)("div",{hotspot:1,className:"tb_p_tooltip_title",children:o.title}),e&&(0,d.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price tb_price_disabled",children:[o.currency,o.price]}),(o.price>0||o.discount>0)&&(0,d.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price",children:[o.currency,l]})]})}),r=t=>{let{products:o,appData:e,Post:n,showTooltip:r,isPopup:u}=t;const[_,h]=(0,c.useState)(null),b=(0,c.useMemo)(()=>{var t,o;return(null===e||void 0===e||null===(t=e.wall)||void 0===t||null===(o=t.ProductSetting)||void 0===o?void 0:o.Hotspot)||{}},[e]);(0,c.useEffect)(()=>{if(r){const t=o.findIndex(t=>t.id===r);-1!==t&&h(t)}else h(null)},[r,o]);const v=(0,c.useCallback)(t=>{var o,l,c,i;null!==e&&void 0!==e&&e.wall&&(0,s.hq)({type:1,action:2,wall:null===e||void 0===e||null===(o=e.wall)||void 0===o||null===(l=o.ThemeInfo)||void 0===l?void 0:l.webId,product_id:t.id,post:n.referenceId,owner:null===e||void 0===e||null===(c=e.wall)||void 0===c||null===(i=c.ThemeInfo)||void 0===i?void 0:i.ownerId,feed:n.feedId,currency:t.currencyCode,price:Number(t.discount)>0?t.discount:t.price})},[e,n]),m=(0,c.useCallback)((t,o)=>{t.stopPropagation(),v(o),window.open(o.url,"_blank")},[v]);return null!==b&&void 0!==b&&b.status?o.map((t,o)=>{const e="hotspot-".concat(t.id,"-").concat(o).concat(u?"-pop":""),c=_===o;return(0,d.jsxs)("div",{id:e,className:"tb_hotspot_dot".concat(c?" tb_hotspot_active_":""),role:"button",style:{top:t.hotspot.top,left:t.hotspot.left},onMouseEnter:()=>h(o),onMouseLeave:()=>h(null),onClick:o=>{m(o,t)},"data-tooltip-offset":7,children:[(0,d.jsx)("div",{hotspot:1,className:"tb_hotspot__ ".concat(0===b.type?"tb_hotspot_ani__":""),children:o+1}),(0,d.jsx)(a.A,{wallId:e,children:(0,d.jsx)(i.m_,(0,l.A)((0,l.A)({appendTo:"body","data-tooltip-id":"tooltip-".concat(t.id,"-").concat(o).concat(u?"-pop":""),className:"tb_pro_tooltip",anchorSelect:"#".concat(e),clickable:!0},u?{isOpen:c}:{}),{},{children:(0,d.jsx)(p,{item:t})}),o)})]},"".concat(t.id,"-").concat(o))}):null},u=(0,c.memo)(r),_=(0,n.Ng)(t=>({appData:t.appData}))(u)}}]);