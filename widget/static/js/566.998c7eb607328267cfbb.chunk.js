"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[566,629],{30629:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var i=s(9950),a=s(48400),r=s(10300),o=s(52867),n=s(93152),l=s(66345),d=s(44414);class c extends i.PureComponent{constructor(){super(...arguments),this.handleResize=()=>this.getActiveWrapperSize(),this.getActiveWrapperSize=e=>{var t=0,s=0,{SnapUp:i,ThemeInfo:a,sliderClass:r}=this.props,{QrCode:n,Form:d}=i;if(a.IsUser&&!(0,o.Fr)()&&(n.status||d.status))var c=setInterval((()=>{var e=document.querySelector(".".concat(r));if(e){var i=e.getBoundingClientRect(),o=i.width,n=i.height;o==t&&n==s&&o>0?(clearInterval(c),this.props.updateContainerSize(o,n,1)):(t=o,s=n,this.props.updateContainerSize(o,n),setTimeout((()=>{l.sb&&this.props.updateContainerSize(o,n,2),clearInterval(c)}),[16].includes(a.id)?1e3:3e3))}else console.log("No active wrapper found"),clearInterval(c)}),10)}}componentDidMount(){var{SnapUp:e,ThemeInfo:t}=this.props,{QrCode:s,Form:i}=e;t.IsUser&&!(0,o.Fr)()&&(s.status||i.status)&&(this.getActiveWrapperSize(1),window.addEventListener("resize",this.handleResize))}componentWillUnmount(){var{SnapUp:e,ThemeInfo:t}=this.props,{QrCode:s,Form:i}=e;t.IsUser&&!(0,o.Fr)()&&(s.status||i.status)&&window.removeEventListener("resize",this.handleResize)}render(){var e,{SnapUp:t,ThemeInfo:s,CardStyle:i,postSize:r,isClass:n,qrCardWidth:l,qrCardHeight:c,isLoad:h}=this.props,{QrCode:p,Form:_}=t,u=null!==p&&void 0!==p&&p.position?" tb_pos-".concat(p.position):null,b=[80,81,16,47].includes(s.id),v=(e,t)=>(0,d.jsx)("div",{className:"tb_onsite_upload_btn_wrap ".concat(u),children:(0,d.jsxs)("div",{className:"tb_onsite_upload_btn",children:[p.text?(0,d.jsx)("div",{className:"tb_snap_btn_bg",children:(0,d.jsx)("div",{})}):null,(0,d.jsx)("div",{className:"tb_onsite_btn",onClick:()=>this.props.onSitePopup(!0),children:p.status?(0,d.jsxs)("div",{className:"tb_onsite_qr_btn_wrap",children:[1==p.status?(0,d.jsx)("div",{className:"tb_onsite_qr_code",children:(0,d.jsx)(a.Ay,{level:"L",size:60,value:"".concat((0,o.dq)()).concat(s.webId,"?").concat(s.webId!=s.wallId?"website=true&":"","onsite-upload"),fgColor:e,bgColor:t})}):null,p.text?(0,d.jsx)("div",{className:"tb_onsite_btn_txt tb-cTBfont-".concat(p.style.variant),children:p.text}):""]}):(0,d.jsx)("div",{className:"tb_onsite_btn_wrap_text",children:p.text?(0,d.jsxs)("div",{className:"tb_onsite_btn_txt tb-cTBfont-".concat(p.style.variant),children:[s.IsUser?(0,d.jsx)("div",{className:"tb_onsite_btn_icon_list onsite_icon_vertical",children:(0,d.jsx)("div",{className:"tb__icon",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",fill:"#fff",children:(0,d.jsx)("path",{d:"M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"})})})}):null,p.text]}):""})})]})});return p.status||_.status?[20,5,19,3,83,16,47,60,79,80,81,4].includes(s.id)&&s.IsUser?[47,16,60,81,80].includes(s.id)&&(0,o.Fr)()?(0,d.jsx)(v,{color:"#000",background:"#fff"}):h?(0,d.jsx)("div",{style:{width:l?"".concat(l,"px"):"".concat(r,"%"),height:c?"".concat([81].includes(s.id)?c-0:c,"px"):"auto",padding:(null===i||void 0===i||null===(e=i.style)||void 0===e?void 0:e.margin)/2},className:" ".concat(n||null,"  ").concat([4].includes(s.id)?"":"tb_onsite_upload_btn_wrap"," tb-qr-card"),children:(0,d.jsx)("div",{className:b?"qr_relative":"w-100",children:(0,d.jsxs)("div",{onClick:()=>this.props.onSitePopup(!0),className:"tb_review_hub_wrap ".concat([60,81,80].includes(s.id)?"tb_review_hub_wrap_slide":""," ").concat([4].includes(s.id)?"qr-padding-0":""," "),children:[p.status?(0,d.jsx)("div",{className:"tb_review_hub_qr",style:{marginBottom:p.text?"20px":"0"},children:(0,d.jsx)(a.Ay,{level:"L",value:"".concat((0,o.dq)()).concat(s.webId,"?").concat(s.webId!=s.wallId?"website=true&":"","onsite-upload"),fgColor:"#000",bgColor:"#fff"})}):null,p.status?null:(0,d.jsx)("div",{className:"tb_onsite_btn_icon_list",style:{marginBottom:p.text?"20px":"0"},children:(0,d.jsx)("div",{className:"tb__icon tb-plus-svg",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",fill:"#fff",width:"18",height:"18",children:(0,d.jsx)("path",{d:"M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"})})})}),p.text?(0,d.jsx)("div",{className:"tb_review_hub_txt",children:p.text}):null]})})}):null:(0,d.jsx)(v,{color:"#000",background:"#fff"}):null}}const h=(0,r.Ng)((e=>({modalPop:e.modalPop})),(e=>({onSitePopup:t=>e((0,n.b8)(t))})))(c)},50566:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var i=s(89379),a=s(9950),r=s(66345),o=s(10300),n=s(53556),l=s(61302),d=s(21850),c=s(52867),h=s(78262),p=s(3720),_=s(15537),u=s(44414);const b=e=>{var{Post:t,ThemeInfo:s,ThemeStyle:i,CardStyle:a,ThemeRule:r,index:o,ProductSetting:n,inView:l}=e,d=81==s.id&&a.style.ratio||100,c=[3,5].includes(t.type)&&1==i.autoPlay||!1,b=!t.hotspot;return(0,u.jsxs)("div",{className:"tb_ht_media_wrap",children:[(0,u.jsx)(_.default,{Post:t,IconClass:"tb_ht_media_icon",isCenter:!1,show:b,hideVideo:c}),c?(0,u.jsx)(p.A,{VideoClass:"tb_ht_video",Post:t,size:d,isCover:!0,controls:!1,autoPlay:c,muted:!0,index:o,inView:l}):(0,u.jsx)(h.A,{ImageClass:"tb_ht_image",Post:t,size:d,hotspot:!0,ProductSetting:n,index:o,inView:l})]})};var v=s(56071),m=(0,a.lazy)((()=>Promise.resolve().then(s.bind(s,92663)))),x=(0,a.lazy)((()=>s.e(7713).then(s.bind(s,47713))));const w=e=>{var{Post:t,CardStyle:s,index:i,ThemeInfo:o,onClickToCTA:n,ThemeStyle:l,ProductSetting:d,clickToShowPopUp:c,onClickPopUpSlider:h}=e,p=81!=o.id,_=r.MH?"tb_ht_color_overlay":"tb_ht_post_overlay-dark",w={backgroundColor:s.style.background},g=p?"50%":null,C=!!(s.shopText&&t.products.length&&o.isShoppable);return(0,a.useEffect)((()=>{t.isPopUp&&h(i,t)}),[i,t.isPopUp,t]),(0,u.jsx)(v.A,{children:e=>{var r,{ref:n,inView:h}=e;return(0,u.jsx)("div",{id:"tb_ht_id-".concat(t.id),className:"tb_ht_post_wrapper",onClick:c(i,t),style:{padding:s.style.margin/2,opacity:h?1:0,transition:h?"opacity .5s ease-in-out":""},"tb-network":t.network.id,"tb-product":t.isShopIcon?1:t.isHotspot?2:0,"area-label":t.content.text,role:"article",ref:n,"post-id":t.referenceId?t.referenceId:t.id,"feed-id":t.feedId,children:(0,u.jsx)("div",{className:"tb_ht_post_in",style:{borderRadius:g},role:"button","aria-label":"Popup",tabIndex:"0",children:(0,u.jsxs)("div",{className:"tb_ht_post_media_wrapp",role:"button",tabIndex:"0","aria-label":"Pop Up Button",children:[(0,u.jsx)(b,{Post:t,CardStyle:s,ProductSetting:d,ThemeStyle:l,ThemeInfo:o,index:i,inView:h},i),(0,u.jsxs)("div",{className:"tb_ht_post_details",children:[null!==s&&void 0!==s&&null!==(r=s.icon)&&void 0!==r&&r.status?(0,u.jsx)("div",{className:"tb_ht_social_",children:(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(m,{networkClass:"tb_ht_social_ico_",networkId:t.networkId,iconStyle:s.icon})})}):null,C?(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(x,{CardStyle:s,mode:1,btnClass:"tb_ht_btn_wrap"})}):null]}),(0,u.jsx)("div",{className:"tb_ht_post_overlay ".concat(_),style:w,children:(0,u.jsx)("div",{})})]})})})}})};s(61038);var g=s(30629);class C extends a.Component{constructor(e){super(e),this.requestData=()=>{var{appendData:e,ThemeInfo:t,ThemeStyle:s,CardStyle:i,hasMoreData:a,nextData:o,containerSize:n,loaderData:l}=this.props,d=(i.minimumWidth||150)+10;a&&s.autoScrollStatus&&!l.isShowMoreLoading&&o(r.aD?t.wallId:t.webId,Math.floor(Date.now()/1e3),(0,c.Ci)(n.width,s.column,d),e.networkID,e.after,e.heightEvent)},this.updateContainerSize=(e,t,s)=>{this.containerRef.current&&(2!==s&&this.setState({containerWidth:this.containerRef.current.offsetWidth,qrcardSize:(0,i.A)((0,i.A)({},this.state.qrcardSize),{},{width:e,height:this.containerRef.current.offsetHeight||t})}),s&&this.setState({isLoad:!0}))},this.autoScrollSlider=e=>{var t=e.index;e.length-t===e._o.perPage&&this.requestData()},this.handleResize=()=>this.setState({resizeKey:Math.random()}),this.inputRefs={},this.containerRef=a.createRef(),this.isDragging=!1,this.state={qrcardSize:{width:0,height:0},containerWidth:0,isUpdate:0,resizeKey:0,isLoad:!1}}componentDidMount(){setTimeout((()=>{var e=document.querySelectorAll(".splide__slide");e&&e.forEach((e=>{e.removeAttribute("aria-hidden"),e.removeAttribute("role")}))}),100),this.props.loadBranding(),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){var{postData:e,completeDataObject:t,CardStyle:s,ThemeStyle:a,ThemeInfo:r,parentID:o,onClickToCTA:d,onClickPopUpSlider:h,containerSize:p,ProductSetting:_,clickToShowPopUp:b,SnapUp:v}=this.props,{QrCode:m,Form:x}=v,{qrcardSize:C,containerWidth:S,resizeKey:f,isLoad:j}=this.state,y=a.slide.autoSlide,I=a.slide.slideDuration,N=a.autoScrollStatus,z=o,P={},T=(1===N||!Object.keys(P).length)&&"slide",k=(s.minimumWidth||150)+10,L=(0,c.Ci)(p.width,a.column,k),U=(0,i.A)((0,i.A)({},P),{},{grid:{rows:1},type:1!==N&&T,rewind:!0,rewindSpeed:1e3,interval:1===y&&parseInt(I)>0?1e3*parseInt(I):5e3,perPage:L,perMove:1,gap:0,autoplay:1===y,padding:0,pagination:!1,arrows:!0}),q=e.length<10?Array.from({length:10},((t,s)=>e[s%e.length])):e,A=r.IsUser&&!(0,c.Fr)()&&(m.status||x.status);return""!=o?(0,u.jsxs)("div",{ref:this.containerRef,className:"tb_ht_post_container ".concat(A?"tb_post_container_qr":null),children:[A?(0,u.jsx)("div",{style:{width:C.width},children:(0,u.jsx)("div",{className:"fixed-qr-card",style:{padding:0},children:(0,u.jsx)(g.default,{updateContainerSize:this.updateContainerSize,CardStyle:s,ThemeInfo:r,SnapUp:v,postSize:100,qrCardWidth:C.width,qrCardHeight:C.height,isLoad:1,sliderClass:"tb_ht_post_in"})})}):null,(0,u.jsx)("div",{style:{width:A?"".concat(S-C.width,"px"):"100%"},children:(0,u.jsxs)(n.eB,{hasTrack:!1,className:"tb_ht_post_slider  ".concat(A?"tb_post_slider_qr":" "," ").concat(60==r.id?"tb_ht_post_slider_story":"tb_ht_post_slider_review_hub"," "),options:U,extensions:{Grid:l.x},ref:e=>this.inputRefs[z]=e,onMove:this.autoScrollSlider,children:[(0,u.jsx)("div",{className:"splide__track",children:(0,u.jsx)("div",{className:"splide__list",children:(a.row>1&&1!==q.length&&q.length%2!==0?q.pop():q)&&q&&q.length>0&&q.map(((e,i)=>{var n=t[e];return e?(0,u.jsx)("div",{className:"splide__slide tb_".concat(n.id),"data-id":n.id,p_id:o,children:(0,u.jsx)(w,{onClickToCTA:d,onClickPopUpSlider:h,Post:n,index:i,ProductSetting:_,clickToShowPopUp:b,CardStyle:s,ThemeStyle:a,ThemeInfo:r})},i):(0,u.jsx)("div",{className:"splide__slide tb_".concat(0),"data-id":0,p_id:0},"")}))})}),(0,u.jsxs)("div",{className:"splide__arrows splide__arrows--ltr tb_ht_arrow_wrapper_",children:[(0,u.jsx)("div",{className:"tb_ht_arrow splide__arrow splide__arrow--prev tb_ht_arrow tb_ht_arrow_left__ tb__icon tb-arrow-left-alt ".concat(A?"left-arrow-wrapper":null),role:"button","aria-label":"Go to previous slide",children:(0,u.jsx)("div",{})}),(0,u.jsx)("div",{className:"tb_ht_arrow splide__arrow splide__arrow--next tb_ht_arrow_right__ tb__icon tb-arrow-right-alt",role:"button","aria-label":"Go to next slide",children:(0,u.jsx)("div",{})})]})]},f)})]}):null}}const S=(0,a.memo)((0,o.Ng)((e=>({loaderData:e.loaderData})),(e=>({nextData:(t,s,i,a,r,o,n,l)=>e((0,d.wF)(t,s,i,a,r,o,n,l))})))(C))}}]);