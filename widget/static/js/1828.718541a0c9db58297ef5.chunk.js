"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[1828,7482,9874,9924],{45285:(e,t,a)=>{a.d(t,{bs:()=>m});var i=a(89379),o=a(10467),d=a(80415),s=a(296),l=a(52867),r=a(66345),n=a(14313),c=[],p=function(){var e=(0,o.A)((function*(e){return["taggbox.com","tagbox.com","tagembed.com","socialwalls.com"].some((t=>e.includes(t)))||(yield fetch(e).then((e=>e.ok)).catch((()=>!1)))}));return function(t){return e.apply(this,arguments)}}(),m=e=>{e.persist();var t=e.target,{network:a,itemId:i,themeId:o}=t.dataset;if(1!=a||[3,4,16,47,50,55,60].includes(o))c.includes(e)||c.push(e);else{var d=document.querySelector(".tb_media-".concat(i));d&&(d.style.display="none")}1===c.length&&h()},h=function(){var e=(0,o.A)((function*(){var e,{postData:t,wall:a}=s.A.getState().appData;if(a&&Object.keys(a).length&&c.length){var o,{User:m,Wall:_}=a,v=null===m||void 0===m?void 0:m.id,g=(r.aD,null===_||void 0===_?void 0:_.id),b=null===(e=c[0])||void 0===e?void 0:e.target,{filterId:f,network:w,itemId:x,load:y}=b.dataset,I=document.querySelector('img[data-item-id="'.concat(x,'"]')),S=null!==t&&void 0!==t&&t.completeDataObject?Object.values(t.completeDataObject).filter((e=>e.id===x)):[];if(null!==S&&void 0!==S&&S.length)if(!(yield p(null===(o=S[0])||void 0===o?void 0:o.postFileNew))&&I){if([2,18,3,28].includes(+w)&&"0"===y&&"34"!==f&&!b.src.includes("cloud.taggbox.com")){var j=((e,t,a)=>{var o,d,s,l,r,{UserPlan:n,Wall:c}=t;return(0,i.A)((0,i.A)((0,i.A)({table_name:null===n||void 0===n?void 0:n.db_table},e),null!==a&&void 0!==a&&a.length?{feedId:null===(o=a[0])||void 0===o?void 0:o.feedId,type:null===(d=a[0])||void 0===d?void 0:d.type,link:null===(s=a[0])||void 0===s?void 0:s.link,postFile:null===(l=a[0])||void 0===l?void 0:l.postFile,mediaFile:null===(r=a[0])||void 0===r?void 0:r.mediaFile}:{}),{},{url:null===c||void 0===c?void 0:c.url})})({wallId:g,postId:x,ownerId:v},a,S);try{var{data:k}=yield(new n.A).post(r.t5,j,{headers:(0,l.Ky)()}),P=r.aD?"https://images.".concat(r.QR,"/"):"";b.src="18"===w?"".concat(P).concat(k.media):k.media}catch(z){b.src=d.gX}finally{u(b)}}else b.src=d.gX,u(b);c.shift(),h()}else{var N="".concat(d.th,"media/images/no-image.svg");b.src=N,b.srcset=N,u(b),c.shift()}}}));return function(){return e.apply(this,arguments)}}(),u=e=>e.setAttribute("data-load","1")},69924:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var i=a(9950),o=a(89874),d=a(80415),s=a(45285),l=a(44414);class r extends i.PureComponent{constructor(e){super(e),this.state={mediaLoaded:!1}}UNSAFE_componentWillReceiveProps(e){var{Post:t}=e,{media:a}=t;this.props.Post!==t&&this.setState({imgSize:{small:a.image.small,large:a.image.large,orignal:a.image.orignal}})}render(){var{Post:e,opacity:t,mediaSize:a,Products:i,Item:r,ThemeInfo:n,showTooltip:c}=this.props,{mediaLoaded:p}=this.state,m=r||e.media,h=!!(i&&i.length>0&&e.hotspot),u={opacity:t,filter:p?"blur(2px)":null,aspectRatio:"".concat(a.width,"/").concat(a.height)};return(0,l.jsxs)("div",{className:"tb_post_modal_img_holder",children:[h?(0,l.jsx)(o.default,{isPopup:!0,products:i,Post:e,showTooltip:c}):null,(0,l.jsx)("img",{className:"tb_post_modal_img_",decoding:"async",src:m.image.small,srcSet:"".concat(m.image.large,", 991w ").concat(m.image.small,", 480w"),sizes:a&&a.width,alt:"","data-link":e.link,"data-network":e.networkId,"data-wall-id":n.wallId,"data-owner-id":n.ownerId,"data-item-id":e.id,"data-feed-id":n.feedId?n.feedId:"","data-load":"0",onLoad:this.handleImageLoad,onError:e=>{e.target.src="".concat(d.th,"media/error/no-image.svg"),e.target.srcset="".concat(d.th,"media/error/no-image.svg"),(0,s.bs)(e)},loading:"lazy",draggable:"false",width:a&&a.width,height:a&&a.height,style:u})]})}}},51828:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var i=a(89379),o=a(9950),d=a(69924),s=a(7482),l=a(53556),r=a(44414);class n extends o.PureComponent{constructor(e){super(e),this.handleSlideChange=()=>{var e=this.splideRef.current.splide,t=e.index,a=0===t,i=t===e.length-1;this.setState({isFirst:a,isLast:i})},this.state={mediaSize:{height:1e3,width:1e3},mediaLoaded:!1,imgUrl:e.Post.media.image.small,largerHeight:0,isFirst:!1,isLast:!1,currentIndex:0},this.splideRef=o.createRef()}UNSAFE_componentWillReceiveProps(e){var{Post:t}=e,{ImageUrl:a}=e;this.state.imgUrl!==a&&this.setState({imgUrl:a,mediaLoaded:!1,mediaSize:{height:t.media.height,width:t.media.width}})}componentDidMount(){var{Post:e}=this.props;this.setState({mediaSize:{height:e.media.height,width:e.media.width}}),this.splideRef.current.splide.on("moved",this.handleSlideChange),this.handleSlideChange()}componentWillUnmount(){this.splideRef.current.splide.off("moved",this.handleSlideChange)}render(){var{Post:e,mediaSize:t,ThemeInfo:a,onUpdateProdImgIdx:o,winSize:n}=this.props,{isFirst:c,isLast:p,currentIndex:m}=this.state;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.default,{winSize:n,Post:e,mediaSize:t,ThemeInfo:a,mediaSizeCallback:this.mediaSize,opacity:0}),(0,r.jsx)("div",{className:"tb_post_modal_slide_holder_",children:(0,r.jsxs)(l.eB,{hasTrack:!1,className:"tb_post_modal_media_slider",options:{type:"slide",rewind:!1,speed:400,gap:0,drag:!0,autoplay:!1,autoHeight:!0,padding:0,gap:"1rem",pagination:!0,arrows:!0,classes:{pagination:"splide__pagination tb_modal_slider_dots",page:"splide__pagination__page tb_modal_slider_dot"}},ref:this.splideRef,onActive:(e,t,a)=>{this.setState({currentIndex:t.index},(()=>o(this.state.currentIndex)))},children:[(0,r.jsx)(l.v9,{children:e.mediaList.map(((o,c)=>{var p=m==c;return(0,r.jsx)(l.Nn,{style:{margin:0,padding:0},children:[2,4].includes(o.type)||!p?(0,r.jsx)(d.default,{winSize:n,Post:e,Item:o,Products:o.product,mediaSize:t,ThemeInfo:a,mediaSizeCallback:this.mediaSize,hotspot:!0,opacity:1}):[3,5].includes(o.type)?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.default,{winSize:n,Post:(0,i.A)((0,i.A)({},e),{},{networkId:e.networkId,media:o}),Item:o,Products:o.products,mediaSize:t,ThemeInfo:a,mediaSizeCallback:this.mediaSize,opacity:1})}):null},c)}))}),(0,r.jsxs)("div",{className:"splide__arrows splide__arrows--ltr tb_post_modal_arrow_wrapper_",children:[(0,r.jsx)("div",{className:"splide__arrow splide__arrow--prev tb_post_modal_arrow tb_post_modal_arrow_left__ tb__icon tb-arrow-left-alt",disabled:c,role:"button","aria-label":"Go to previous slide",children:(0,r.jsx)("div",{})}),(0,r.jsx)("div",{className:"splide__arrow splide__arrow--next  tb_post_modal_arrow tb_post_modal_arrow_right__ tb__icon tb-arrow-right-alt",disabled:p,role:"button","aria-label":"Go to next slide",children:(0,r.jsx)("div",{})})]})]})})]})}}},7482:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var i=a(9950),o=a(38092),d=a.n(o),s=a(66345),l=a(76506),r=a(44414);class n extends i.PureComponent{constructor(e){super(e),this.setVideoLoaded=e=>{this.setState({videoLoaded:e})},this.muteToggle=()=>{this.setState({muted:!this.state.muted})},this.onUpdateTime=e=>{try{if(!s.aD){var{played:t}=this.state;this.setState({played:t+e.playedSeconds})}}catch(a){console.log(a)}},this.state={videoLoaded:!1,muted:!0,played:0},this.VideoWrap=i.createRef()}componentWillUnmount(){var{played:e}=this.state;s.aD||(0,l.HI)(e)}render(){var{Post:e,mediaSize:t}=this.props,{videoLoaded:a,muted:i}=this.state,{media:o,id:s,link:l,networkId:n}=e,c=![7,3,25].includes(e.networkId),{height:p,width:m}=t;return(0,r.jsxs)("div",{className:"tb_post_modal_video_holder".concat(a?" tb_post_video_loaded":""),ref:this.VideoWrap,children:[c?(0,r.jsx)("div",{className:"tb_m_mute_btn",onClick:this.muteToggle,children:(0,r.jsx)("div",{className:"tb__icon tb-".concat(i?"mute":"unmute"),children:(0,r.jsx)("div",{})})}):"",(0,r.jsx)(d(),{className:"tb_post_modal_video tb_p_media-".concat(s),url:o.video.full,"data-height":p,"data-width":m,"data-type":"video","data-network":n,"data-link":l,"data-item-id":s,"data-load":0,config:{facebook:{appId:"117029975354072",attributes:{"data-width":m,"data-height":p,poster:o.image.small,muted:i}},file:{attributes:{preload:"metadata",poster:o.image.small,muted:i}}},loop:!0,autoPlay:!0,muted:i,volume:1,playsinline:!0,onReady:e=>{this.setVideoLoaded(!0)},playing:!0,height:"100%",width:"100%",controls:!c,onProgress:this.onUpdateTime}),a?null:(0,r.jsx)("div",{className:"tb_post_modal_spinner",children:(0,r.jsx)("div",{})})]},o.video.full)}}},89874:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var i=a(89379),o=a(9950),d=a(10300),s=a(1823),l=a(21850),r=a(82652),n=a(44414),c=(0,o.memo)((e=>{var{item:t}=e,a=t.discount>0&&t.discount!==t.price,i=t.discount>0?t.discount:t.price;return(0,n.jsxs)("a",{hotspot:1,href:t.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,n.jsx)("div",{hotspot:1,className:"tb_p_tooltip_title",children:t.title}),a&&(0,n.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price tb_price_disabled",children:[t.currency,t.price]}),(t.price>0||t.discount>0)&&(0,n.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price",children:[t.currency,i]})]})})),p=e=>{var{products:t,appData:a,Post:d,showTooltip:p,isPopup:m}=e,[h,u]=(0,o.useState)(null),_=(0,o.useMemo)((()=>{var e,t;return(null===a||void 0===a||null===(e=a.wall)||void 0===e||null===(t=e.ProductSetting)||void 0===t?void 0:t.Hotspot)||{}}),[a]);(0,o.useEffect)((()=>{if(p){var e=t.findIndex((e=>e.id===p));-1!==e&&u(e)}else u(null)}),[p,t]);var v=(0,o.useCallback)((e=>{var t,i,o,s;null!==a&&void 0!==a&&a.wall&&(0,l.hq)({type:1,action:2,wall:null===a||void 0===a||null===(t=a.wall)||void 0===t||null===(i=t.ThemeInfo)||void 0===i?void 0:i.webId,product_id:e.id,post:d.referenceId,owner:null===a||void 0===a||null===(o=a.wall)||void 0===o||null===(s=o.ThemeInfo)||void 0===s?void 0:s.ownerId,feed:d.feedId,currency:e.currencyCode,price:Number(e.discount)>0?e.discount:e.price})}),[a,d]),g=(0,o.useCallback)(((e,t)=>{e.stopPropagation(),v(t),window.open(t.url,"_blank")}),[v]);return null!==_&&void 0!==_&&_.status?t.map(((e,t)=>{var a="hotspot-".concat(e.id,"-").concat(t).concat(m?"-pop":""),o=h===t;return(0,n.jsxs)("div",{id:a,className:"tb_hotspot_dot".concat(o?" tb_hotspot_active_":""),role:"button",style:{top:e.hotspot.top,left:e.hotspot.left},onMouseEnter:()=>u(t),onMouseLeave:()=>u(null),onClick:t=>{g(t,e)},"data-tooltip-offset":7,children:[(0,n.jsx)("div",{hotspot:1,className:"tb_hotspot__ ".concat(0===_.type?"tb_hotspot_ani__":""),children:t+1}),(0,n.jsx)(r.A,{wallId:a,children:(0,n.jsx)(s.m_,(0,i.A)((0,i.A)({appendTo:"body","data-tooltip-id":"tooltip-".concat(e.id,"-").concat(t).concat(m?"-pop":""),className:"tb_pro_tooltip",anchorSelect:"#".concat(a),clickable:!0},m?{isOpen:o}:{}),{},{children:(0,n.jsx)(c,{item:e})}),t)})]},"".concat(e.id,"-").concat(t))})):null},m=(0,o.memo)(p);const h=(0,d.Ng)((e=>({appData:e.appData})))(m)}}]);