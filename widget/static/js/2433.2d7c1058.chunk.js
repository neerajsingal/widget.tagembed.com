"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[1796,2433],{18459:(t,e,a)=>{a.d(e,{A:()=>n});var o=a(9950),i=(a(14478),a(98776),a(52867)),s=a(80415),l=a(44414);class n extends o.PureComponent{constructor(t){super(t),this.onLoad=t=>{1==t.target.getAttribute("data-load")&&this.setState({imgUrl:t.target.src,loadError:!1})},this.state={loadError:!1,paddingBottom:100,imgUrl:this.props.media}}componentWillReceiveProps(t){const{itemDetails:e}=t,{loadError:a}=this.state;a&&t!=this.props&&e&&Object.keys(e).length>0&&e.showCart&&this.setState({imgUrl:e.data.featured_image,loadError:!1})}render(){const{ImageClass:t,media:e,itemDetails:a}=this.props,{imgUrl:o,paddingBottom:n}=this.state,r={paddingBottom:`${n}%`};return(0,l.jsx)("div",{className:`${t}_wrap mediaHolder`,style:r,children:(0,l.jsx)("img",{className:t,role:"img",src:o,height:300,width:300,onLoad:this.onLoad,onError:t=>{this.setState({loadError:!0}),t.target.src=s.qF},alt:(0,i.wG)(o)})})}}},13147:(t,e,a)=>{a.r(e),a.d(e,{default:()=>A});var o=a(9950),i=a(11127),s=a(66345),l=a(98776),n=a(45565),r=a(44414);const d=o.lazy((()=>Promise.all([a.e(1823),a.e(8092),a.e(3556),a.e(1828)]).then(a.bind(a,51828)))),c=o.lazy((()=>Promise.all([a.e(1823),a.e(9924)]).then(a.bind(a,69924)))),p=o.lazy((()=>Promise.all([a.e(8092),a.e(7482)]).then(a.bind(a,7482)))),h=o.lazy((()=>Promise.all([a.e(6014),a.e(1883)]).then(a.bind(a,29779))));class _ extends o.PureComponent{constructor(t){super(t),this.handleResize=()=>{this.setState({winSize:{width:window.innerWidth,height:window.innerHeight}},(()=>{const{mediaSize:t}=this.state;this.setSize(t.height,t.width)}))},this.setSize=(t,e)=>{const{hideContent:a}=this.props,{winSize:o}=this.state,i=Math.min((o.width-535)/e,(o.height-(90+(a?69:0)))/t),s={height:t*i,width:e*i,paddingBottom:100*t/e},l={winHeight:o.height,winWidth:o.width,height:s.height,width:s.width,paddingBottom:s.paddingBottom};this.props.allSizeCallback(l),this.setState({mediaSize:{height:s.height,width:s.width,paddingBottom:s.paddingBottom}})},this.onMediaLoad=async t=>{const e=!!t.mediaHeight&&parseInt(t.mediaHeight,10),a=!!t.mediaWidth&&parseInt(t.mediaWidth,10);if(e&&a)this.setSize(e,a);else{const e=document.querySelector(`.track${t.id}`),a=e?parseInt(e.getAttribute("data-height"),10):0,i=e?parseInt(e.getAttribute("data-width"),10):0;if(i>0&&a>0)this.setSize(a,i);else try{const{width:e,height:a}=await(0,l.pG)(t.postFileNew);this.setSize(a,e)}catch(o){this.setSize(1e3,1e3)}}},this.state={winSize:{width:window.innerWidth,height:window.innerHeight},mediaSize:{height:null,width:null,paddingBottom:null}}}static getDerivedStateFromProps(t,e){return t.data!==e.data?{...e,data:t.data}:null}componentDidMount(){const{data:t}=this.props;window.addEventListener("resize",this.handleResize),this.onMediaLoad(t)}componentDidUpdate(t){this.props.data!==t.data&&this.onMediaLoad(this.props.data)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const{data:t}=this.props,{winSize:e,mediaSize:a}=this.state,i={maxHeight:e.width>991?a.height:null,maxWidth:e.width>991?a.width:null,aspectRatio:`${a.width} / ${a.height}`,flexBasis:e.width>991?a.height:null},s={paddingBottom:`${a.paddingBottom}%`,width:e.width>991?a.width:null};return(0,r.jsxs)("div",{className:"tb_post_modal_media_holder",style:i,children:[null!==t&&void 0!==t&&t.postBranding?(0,r.jsx)(n.A,{size:2}):null,(0,r.jsx)("div",{className:"tb_post_modal_media",style:s,children:(0,r.jsx)("div",{className:"tb_post_modal_media_",children:t.imageList&&t.imageList.length>0?(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(r.Fragment,{}),children:(0,r.jsx)(d,{imageList:t.imageList,...this.props,mediaSize:a})}):2===t.type||4===t.type?(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(r.Fragment,{}),children:(0,r.jsx)(c,{winSize:e,ImageUrl:t.filename,...this.props,mediaSize:a,opacity:1,hotspot:!0})}):3===t.type||5===t.type?t.isAudio?(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(r.Fragment,{}),children:(0,r.jsx)(h,{...this.props})}):(0,r.jsxs)(o.Suspense,{fallback:(0,r.jsx)(r.Fragment,{}),children:[(0,r.jsx)(c,{winSize:e,ImageUrl:t.filename,...this.props,mediaSize:a,opacity:0}),(0,o.createElement)(p,{...this.props,key:t.id})]}):null})})]})}}var u=a(44463),m=a(52867),g=a(93662);class v extends o.PureComponent{constructor(t){super(t),this.state={picture:t.item.author.picture,isAuthorImagevalid:!0}}componentWillReceiveProps(t){const{item:e}=t;this.setState({picture:e.author.picture})}render(){var t,e,a,o,i,l;const{item:n,ThemeRule:d,ownerId:c,Personalization:p}=this.props,h=n.author.picture&&String(n.author.picture).includes("author")?" ":n.author.picture.replace(/[ ]+/g,""),_=`${n.author.username&&n.author.username.length>0?"@":""}${n.author.username}`,v=!(s.HY&&!p.postAuthor||0==n.postAuthor||n.author.isInstaUser),w=0==n.timePost||n.author.isInstaUser,b=s.HY?!(!p.postTime||0==n.postAuthor||w):0!=n.postAuthor&&!w,y=s.HY?!(!p.postTime||w):!w;return(0,r.jsxs)("div",{className:"tb_post_modal_post_author",children:[(0,r.jsxs)("div",{className:"tb_post_modal_author_details",children:[v?(0,r.jsx)("div",{className:"tb_post_modal_author_media",style:{overflow:4==n.network.id?"visible":""},children:this.state.isAuthorImagevalid?(0,r.jsx)("img",{loading:"lazy",className:"tb_post_modal_author_media__",src:h&&String(h).includes("author.png")?" ":h.replace(/[ ]+/g,""),alt:(0,m.wG)(h),width:45,height:45,onError:t=>{this.setState({isAuthorImagevalid:!1})}}):(0,r.jsx)(g.A,{network:n.network,username:n.author.name,authorClass:"tb_post_modal_author_media__",errorPic:n.author.errorPic})}):null,(0,r.jsxs)("div",{className:"tb_post_modal_author_deatils",children:[v?(0,r.jsx)("div",{className:"tb_post_modal_author_wrap",children:(0,r.jsxs)("div",{className:"tb_post_modal_author_usrname",onClick:null!==(t=n.author)&&void 0!==t&&t.aiStatus?null:t=>n.link?window.open(n.link):null,children:[n.author.name," "]})}):null,(0,r.jsx)("div",{className:"tb_post_modal_author_info",children:null!==(e=n.author)&&void 0!==e&&e.aiStatus?(0,r.jsxs)("div",{className:"tb_post_modal_author_handlename",children:[null===(a=n.author)||void 0===a||null===(o=a.avgRating)||void 0===o?void 0:o.avgRate," Based on ",null===(i=n.author)||void 0===i||null===(l=i.avgRating)||void 0===l?void 0:l.totalReviews," reviews"]}):(0,r.jsxs)(r.Fragment,{children:[v?(0,r.jsx)("div",{className:"tb_post_modal_author_handlename",children:_}):null,b?(0,r.jsx)("div",{className:"tb_post_modal_seprator_dot",children:(0,r.jsx)("div",{})}):null,y?(0,r.jsx)("span",{className:"tb_post_modal_post_time",children:(0,m.fF)(n.createdAt)}):null]})})]})]}),(0,r.jsx)("div",{className:"tb_post_modal_social_wrapper",onClick:t=>n.link?window.open((0,m.C9)(n.link),"_blank"):null,children:(0,r.jsx)(u.default,{network:n.network,networkClass:"tb_post_modal_social_ico tb__icon",font:d,ThemeRule:d,isDefault:1===d.iconType,isPopUp:!0})})]})}}var w=a(14478);class b extends o.PureComponent{constructor(){super(...arguments),this.onShareFacebooklink=t=>e=>{window.open(t,"_target");const{item:a,wall:o}=this.props;s.uS||(0,w.hq)({type:2,action:2,wall:o.Wall.id,feed:a.feedId,post:a.referenceId?a.referenceId:a.id,owner:o.Wall.owner}),(0,w.nF)("Tagbox","popup_share_click","popup_share",o.Wall.id)},this.onTwitterClick=t=>{const{item:e,wall:a}=this.props;t&&(s.uS||(0,w.hq)({type:2,action:2,wall:a.Wall.id,feed:e.feedId,post:e.referenceId?e.referenceId:e.id,owner:a.Wall.owner}),(0,w.nF)("Tagbox","popup_share_click","popup_share",a.Wall.id)),window.open(e.share.twitter,"_target")},this.linkedinShareCount=t=>e=>{const{item:a,wall:o}=this.props;s.uS||(0,w.hq)({type:2,action:2,wall:o.Wall.id,feed:a.feedId,post:a.referenceId?a.referenceId:a.id,owner:o.Wall.owner}),(0,w.nF)("Tagbox","popup_share_click","popup_share",o.Wall.id),window.open(t,"_target")}}componentDidMount(){var t,e,a,o;window.twttr&&(null===(t=window)||void 0===t||null===(e=t.twttr)||void 0===e||e.ready((t=>{var e,a;null===(e=window)||void 0===e||null===(a=e.twttr)||void 0===a||a.events.bind("tweet",this.onTwitterClick)}))),window.twttr&&(null===(a=window)||void 0===a||null===(o=a.twttr)||void 0===o||o.ready((t=>{var e,a;null===(e=window)||void 0===e||null===(a=e.twttr)||void 0===a||a.events.bind("tweet",this.onTwitterClick)})))}componentWillReceiveProps(t){var e,a,o,i;window.twttr&&(null===(e=window)||void 0===e||null===(a=e.twttr)||void 0===a||a.ready((t=>{var e,a;null===(e=window)||void 0===e||null===(a=e.twttr)||void 0===a||a.events.bind("tweet",this.onTwitterClick)}))),window.twttr&&(null===(o=window)||void 0===o||null===(i=o.twttr)||void 0===i||i.ready((t=>{var e,a;null===(e=window)||void 0===e||null===(a=e.twttr)||void 0===a||a.events.bind("tweet",this.onTwitterClick)})))}render(){const{sharePostPopUP:t,item:e,color:a}=this.props,o={};return(0,r.jsxs)("div",{className:`tb_post_modal_post_footer_social_${s.uS?" tb_post_modal_post_footer_social_te":""}${s.uS?" tb_post_modal_post_footer_social_ts":""}`,children:[(0,r.jsxs)("div",{className:"tb_post_modal_share_ico",children:[(0,r.jsx)("div",{className:"tb_post_modal_social_ico_list___",children:(0,r.jsx)("div",{onClick:this.onShareFacebooklink(e.share.facebook),children:(0,r.jsx)("div",{className:"tb_post_modal_share_button tb__icon tb-facebook",style:o,children:(0,r.jsx)("div",{})})})}),(0,r.jsx)("div",{className:"tb_post_modal_social_ico_list___",children:(0,r.jsx)("div",{className:"tb_post_modal_share_button tb__icon tb-twitter",onClick:this.onTwitterClick,style:o,children:(0,r.jsx)("div",{})})}),(0,r.jsx)("div",{className:"tb_post_modal_social_ico_list___",children:(0,r.jsx)("div",{className:"tb_post_modal_share_button tb__icon tb-linkedin",onClick:this.linkedinShareCount(e.share.linkedin),style:o,children:(0,r.jsx)("div",{})})}),s.MH&&e.link?(0,r.jsx)("div",{className:"tb_post_modal_social_ico_list___",onClick:a=>t(e),children:(0,r.jsx)("div",{className:"tb_post_modal_share_button tb__icon tb-mail",style:o,children:" "})}):null,!s.uS&&e.link?(0,r.jsx)("div",{className:"tb_post_modal_social_ico_list___ tb_post_link__",onClick:t=>window.open(e.link,"_blank"),children:(0,r.jsx)("div",{className:"tb_post_modal_share_button tb__icon tb-link",style:o,children:" "})}):null]}),s.uS&&e.link?(0,r.jsxs)("div",{className:"tb_post_modal_view_link",onClick:t=>window.open((0,m.C9)(e.link),"_blank"),children:[(0,r.jsx)("div",{className:"tb_post_modal_view",style:o,children:e.network.name}),(0,r.jsx)("div",{className:"tb_post_network_ico tb__icon tb-share-square",style:o,children:" "})]}):null]})}}const y=(0,i.Ng)((t=>{}),(t=>({sharePostPopUP:e=>t((0,w.CW)(e))})))(b);var x=a(70804);const P=t=>{let{network:e}=t;const a={3:{className:"tb_rating_ico__ tb__icon tb-default-star",color:"#1b74e4",fontSize:30},19:{className:"tb_rating_ico__ tb__icon tb-yelp-star",color:"#e00707",fontSize:30},23:{className:"tb_rating_ico__ tb__icon tb-default-star",color:"#ff385c",fontSize:30},28:s.uS?{className:"tb_rating_ico__ tb__icon tb-star",color:"#F8B90C",fontSize:30}:{className:"tb_rating_ico__ tb__icon tb-default-star",color:"#F8B90C",fontSize:30},29:s.uS?{className:"tb_rating_ico__ tb__icon tb-default-star",color:"#000",fontSize:30}:{className:"tb_rating_ico__ tb__icon tb-default-star",color:"#613983",fontSize:30},33:{className:"tb_rating_ico__ tb__icon tb-trustpilot",color:"#000",fontSize:30},35:{className:"tb_rating_ico__ tb__icon tb-star-fill",color:"#34E0A1",fontSize:30}},{className:o,color:i,fontSize:l}=a[(null===e||void 0===e?void 0:e.aiNetwork)||e.id]||{className:"tb_rating_ico__ tb__icon tb-default-star",color:"#F8B90C",fontSize:30};return(0,r.jsx)("div",{className:o,style:{color:i,fontSize:l},"tb-network":e.id,children:(0,r.jsx)("div",{})})};class f extends o.PureComponent{render(){const{rating:t,network:e}=this.props;return(0,r.jsx)("div",{className:"tb__modal_rating__",children:t?[...Array(t)].map(((t,a)=>(0,r.jsx)(P,{network:e},a))):null})}}var k=a(21796);const S=o.lazy((()=>a.e(3576).then(a.bind(a,33576))));class j extends o.PureComponent{render(){const{contentTitle:t,item:e,Personalization:a,ThemeRule:o,allSize:i,isProduct:l,socialAction:n}=this.props,d=!l&&!s.HY&&i.winWidth>991?i.height-(n?90:0):null;let c=20==e.network.id?this.props.contentData:(0,m.w)(this.props.contentData);12==e.network.id&&(c=(0,x.Ay)(c));const p=a.textDecorate&&String(this.props.contentData).length>0?" tb_post_modal_text_decorate":"";return 47===a.widgetTheme&&(document.querySelector("html").style.overflow="auto"),(0,r.jsx)("div",{className:"tb_post_modal_post_wrapper",style:{maxHeight:1!=e.type?d:"100%"},children:(0,r.jsx)("div",{className:"tb_post_modal_post_wrap_in",children:(0,r.jsxs)("div",{className:"tb_post_modal_post_content",children:[null!=e.rating&&e.rating?(0,r.jsx)(f,{rating:e.rating,network:e.network}):null,(0,r.jsxs)("div",{className:`tb_post_modal_content tb-cTBfont-${o.font_varient} ${p}`,children:[t?(0,r.jsx)("div",{className:"tb_post_bold_txt",children:(0,x.Ay)(t)}):null,e.aiStatus?(0,r.jsx)(S,{aiSummary:e.aiSummary,type:null===a||void 0===a?void 0:a.ai_summary}):(0,r.jsx)(k.default,{data:e,content:c,Personalization:a})]})]})})},`content_${e.id}`)}}a(96011);var N=a(83744),I=a(18459);class D extends o.Component{constructor(){super(...arguments),this.state={prdImgLoaded:!1,noImg:!1,itemDetails:{},isLoading:!0},this.openUrl=t=>{const{wall:e}=this.props,a=e.ProductSetting.Button;var o=t;2==parseInt(a.newTab)?window.parent.location.href=o:window.open(o,"_blank")},this.tracking=(t,e)=>{var a,o;const{item:i}=this.props;(0,w.hq)({type:1,action:2,wall:null===t||void 0===t||null===(a=t.Wall)||void 0===a?void 0:a.id,product_id:e.id,post:i.referenceId,owner:null===t||void 0===t||null===(o=t.Wall)||void 0===o?void 0:o.owner,feed:i.feedId,currency:e.price_currency,price:e.product_discount>0?e.product_discount:e.product_price})}}componentDidMount(){const{item:t,wall:e}=this.props;let{itemDetails:a}=this.state;if(t&&t.ugc_products&&t.ugc_products.length){this.setState({isLoading:!0});const o=t.ugc_products.map((t=>{var o,i;const s=t.UgcProduct.product_url;if(1==(null===e||void 0===e||null===(o=e.ProductSetting)||void 0===o||null===(i=o.Button)||void 0===i?void 0:i.pdp_target))return a[t.id]={data:null,showCart:!1},this.setState({itemDetails:a}),Promise.resolve();if(s&&!String(s).includes(".html")&&""!=t.UgcProduct.created_from){const o="magento"===t.UgcProduct.created_from||!1;return(0,N.YS)(s,o,{productId:t.UgcProduct.product_sku,storeId:t.UgcProduct.shopify_shop_id}).then((i=>{if(o&&!1===i.status){var s;a[t.id]={data:{available:!0},showCart:140717!==(null===e||void 0===e||null===(s=e.Wall)||void 0===s?void 0:s.owner)}}else{var l,n;const s=o&&(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.data)||(null===i||void 0===i?void 0:i.data),r=o?{available:!0}:{};a[t.id]={data:null!==s&&void 0!==s&&s.id?{...s,...r}:null,showCart:(null===s||void 0===s?void 0:s.id)&&140717!==(null===e||void 0===e||null===(n=e.Wall)||void 0===n?void 0:n.owner)}}this.setState({itemDetails:a})})).catch((e=>{a[t.id]={data:null,showCart:!1},this.setState({itemDetails:a})}))}return a[t.id]={data:null,showCart:!1},this.setState({itemDetails:a}),Promise.resolve()}));Promise.all(o).then((()=>{this.setState({isLoading:!1})}))}}render(){const{item:t,ugc_products:e,wall:a,openCart:o}=this.props,{itemDetails:i,isLoading:s}=this.state,l=a.ProductSetting,n=l.CatalogueTitle,d=l.Price,c=l.ProductTitle,p=l.Button;return(0,r.jsxs)("div",{className:"tb_pro__container",children:[(0,r.jsx)("div",{className:`tb_pro__heading tb-cTBfont-${n.varient}`,children:(0,x.Ay)(n.text)}),(0,r.jsx)("div",{className:"tb_pro__wrap",children:e.map(((e,l)=>{var n,h,_,u,m,g;return(0,r.jsx)("div",{className:"tb_pro__item",children:(0,r.jsxs)("div",{className:"tb_pro__wrap_in",children:[(0,r.jsx)("div",{className:"tb_pro__img_wrapper",children:(0,r.jsx)(I.A,{ImageClass:"tb_pro__image",media:e.UgcProduct.product_image,size:!1,itemDetails:i[e.id]?i[e.id]:null},`img_prod${e.id}`)}),e.UgcProduct.product_title?(0,r.jsx)("div",{className:`tb_pro__title tb-cTBfont-${c.varient}`,children:(0,x.Ay)(e.UgcProduct.product_title)}):null,e.UgcProduct.product_price>0||e.UgcProduct.product_discount>0?(0,r.jsxs)("div",{className:"tb_pro__price_wrap",children:[(0,r.jsxs)("div",{className:`tb_pro__price tb-cTBfont-${d.varient}`,children:[e.UgcProduct.price_currency_symbol,e.UgcProduct.product_discount>0?e.UgcProduct.product_discount:e.UgcProduct.product_price]}),e.UgcProduct.product_discount>0&&e.UgcProduct.product_discount!=e.UgcProduct.product_price?(0,r.jsxs)("div",{className:`tb_pro__discount_price tb-cTBfont-${d.varient}`,children:[e.UgcProduct.price_currency_symbol,e.UgcProduct.product_price]}):null]}):null,i&&Object.keys(i).length>0&&i[e.id]&&i[e.id].showCart?(0,r.jsx)("div",{className:"tb_pro__link",children:(0,r.jsx)("div",{onClick:null!==(n=i[e.id])&&void 0!==n&&null!==(h=n.data)&&void 0!==h&&h.available?()=>o(e.id,e,i[e.id],t):null,className:`tb_pro__btn ${null!==(_=i[e.id])&&void 0!==_&&null!==(u=_.data)&&void 0!==u&&u.available?"":"tb_pro_sold"} tb-cTBfont-${p.varient} ${s?"tb_pro_sold":""}`,children:null!==(m=i[e.id])&&void 0!==m&&null!==(g=m.data)&&void 0!==g&&g.available?p.text:"Sold Out"})}):(0,r.jsx)("div",{className:"tb_pro__link",children:(0,r.jsx)("div",{onClick:()=>{this.openUrl(e.UgcProduct.product_url),this.tracking(a,e.UgcProduct)},className:`tb_pro__btn tb-cTBfont-${p.varient} ${s?" tb_pro_sold":""}`,target:a&&a.User&&"102810"!=a.User.id?"_blank":"",children:p.text})})]})},l)}))})]})}}const C=D;var z=a(80415);function U(t){t.style.setProperty("visibility","visible","important"),t.style.setProperty("opacity","1","important"),t.style.setProperty("display","flex","important"),t.style.setProperty("transform","none","important"),t.style.setProperty("clip-path","initial","important"),t.style.setProperty("border","none","important")}class T extends o.PureComponent{render(){const{brandingNetworks:t,languageSetting:e,wallId:a,themeID:o,user:i}=this.props,l=s.HY||s.uS?`${z.om}`:`${(0,m.hZ)(t,a)[0]}`,n=s.uS||"tagembed"==i?"tagembed-light.svg":s.HY?"tagshop-light.svg":s.MH||"taggbox"==i?"tagbox-light.svg?var=1":"";return(0,r.jsxs)("a",{href:l,target:"_blank",ref:t=>{t&&(t.style.setProperty("position","absolute","important"),t.style.setProperty("left","auto","important"),t.style.setProperty("right","0","important"),t.style.setProperty("bottom","-26px","important"),t.style.setProperty("align-items","center","important"),t.style.setProperty("padding-top","4px","important"),t.style.setProperty("display","flex","important"),t.style.setProperty("width","auto","important"),t.style.setProperty("text-decoration","none","important"),t.style.setProperty("direction","ltr","important"),U(t))},children:[(0,r.jsxs)("div",{ref:t=>{t&&(t.style.setProperty("font-size","13px","important"),t.style.setProperty("color","#fff","important"),t.style.setProperty("margin-right","5px","important"),t.style.setProperty("width","100%","important"),t.style.setProperty("height","auto","important"),t.style.setProperty("font-family","inherit","important"),U(t))},children:[Object.keys(e).length>0&&e.poweredBy?e.poweredBy:"Powered by"," "]}),(0,r.jsx)("div",{ref:t=>{t&&(t.style.setProperty("background-image",`url(${z.th}/media/images/${n})`,"important"),t.style.setProperty("background-size","contain","important"),t.style.setProperty("background-position","left center","important"),t.style.setProperty("background-repeat","no-repeat","important"),t.style.setProperty("height","22px","important"),t.style.setProperty("min-height","22px","important"),t.style.setProperty("width","90px","important"),t.style.setProperty("min-width","90px","important"),U(t))}})]})}}var W=a(72076),$=a(60895);class M extends o.PureComponent{constructor(){super(...arguments),this.state={isEnable:0,eventData:{},shareText:"SHARE",viewOnText:"View on",currentIndex:null,completeData:{},personalization:{},url:null,imgData:[],type:"",parentID:"",isRepeatingPost:!1,allSize:{winHeight:null,winWidth:null,height:null,width:null,paddingBottom:null},addtoCartPopup:!1,productImg:"",prodImgIdx:0},this.keyboardEvent=t=>{let e=this.state.currentIndex;39==t.keyCode||40==t.keyCode?(e+=1,this.featuredPopSliderChangeIndex(e)(t)):37==t.keyCode||38==t.keyCode?(e-=1,this.featuredPopSliderChangeIndex(e)(t)):27==t.keyCode&&this.closeWidgetPopUP()},this.onCloseModal=()=>{var t=document.querySelector(`#tb_post_modal_modal-${this.state.parentID}`);t&&t.classList.contains("tb_post_modal_show")&&(t.classList.remove("tb_post_modal_show"),this.setState({isEnable:0,currentIndex:null,type:"",addtoCartPopup:!1,selectedProdDetails:null},this.props.closePopUP()));var e=document.getElementsByTagName("html");e&&e[0]&&(e[0].style.overflow="")},this.closeWidgetPopUP=t=>this.onCloseModal(),this.getWidgetPopUPEvent=t=>{void 0!==t&&""!=t&&t.card&&("post"==t.type?this.setState({url:"",isEnable:1,eventData:t,currentIndex:t.index,completeData:t.idArray,viewOnText:t.viewOnText,shareText:t.shareText,imgData:t.imgData,personalization:t.personalization,type:t.type}):"submit-pic"==t.type&&this.setState({isEnable:1,type:t.type,windowParent:t}))},this.featuredPopSliderChangeIndex=t=>e=>{const{eventData:a,isRepeatingPost:o}=this.state;if(a.idArray.length-1!=t&&t!==a.idArray.length||o){let e;e=t===a.idArray.length-1||t===a.idArray.length?0:-1===t?a.idArray.length-1:t,this.setState({currentIndex:e,isRepeatingPost:!1},(()=>this.onPopUpTrack()))}else this.loadMore()},this.onPopUpTrack=()=>{try{const{wall:t}=this.props,{currentIndex:e,completeData:a,eventData:o}=this.state;let i=null;i=-1===e?a[o.idArray.length-1]:a[e];const l={feed:i.feedId,post:i.referenceId?i.referenceId:i.id},n={wallId:t.Wall.id,userId:t.Wall.owner,feedId:i.feedId,postId:i.id},r={action:2,wall:t.Wall.id,feed:i.feedId,post:i.referenceId?i.referenceId:i.id,type:3,owner:t.Wall.owner};(0,w.hq)(s.uS?n:s.Qy?r:{action:2,wall:t.Wall.id,...l,owner:t.Wall.owner})}catch(t){console.log("Error in PopUp Tracking",t)}},this.loadMore=()=>{const{wall:t,postData:e,postHeight:a}=this.props,{eventData:o,currentIndex:i}=this.state,s=!(e.hasMoreData&&Object.keys(e.hasMoreData).length>0)||(!e.hasMoreData[0]||0!=e.hasMoreData[0].hasMoreData)&&(!e.hasMoreData[e.appendData.networkID]||e.hasMoreData[e.appendData.networkID].hasMoreData);if(o.idArray.length-1==i&&this.setState({isRepeatingPost:!0}),s){const o=t.ThemeRule.numberOfPosts,i=Math.floor(Date.now()/1e3);this.props.managePostHeight(a),this.props.getDataNextSteps(t.Wall.id,i,o,e.appendData.networkID,e.appendData.after,e.appendData.heightEvent)}else this.setState({currentIndex:0})},this.popUpCloseClckOnWindow=()=>{document.addEventListener("click",(t=>{t.target.matches(`#tb_post_modal_modal-${this.state.parentID}`)&&this.onCloseModal()}))},this.allSize=t=>{this.setState({allSize:{winHeight:t.winHeight,winWidth:t.winWidth,height:t.height,width:t.width,paddingBottom:100*t.height/t.width}})},this.onClickOpenCart=(t,e,a,o)=>{const{wall:i}=this.props,s={type:1,action:2,wall:i.Wall.id,feed:o.feedId,post:o.referenceId?o.referenceId:o.id,owner:i.Wall.owner,product_id:e.UgcProduct.id,currency:e.UgcProduct.price_currency,price:e.UgcProduct.product_discount>0?e.UgcProduct.product_discount:e.UgcProduct.product_price};this.setState({addtoCartPopup:!0,selectedProdDetails:a,tagProdDetail:{...e,trackingData:s},pId:t,productImg:e.UgcProduct.product_image})},this.closeCart=t=>{this.setState({addtoCartPopup:!1,selectedProdDetails:null},(()=>{var t=document.querySelector(`#tb_post_modal_modal-${this.state.parentID}`);t&&t.classList.add("tb_post_modal_show")}))},this.onUpdateProdImgIdx=t=>{this.setState({prodImgIdx:t})}}componentDidMount(){const{data:t}=this.props;let e=document.querySelector(".tb_app_container"),a=m.wV?m.wV:e.parentNode.id;this.setState({parentID:a}),this.getWidgetPopUPEvent(t),setTimeout((()=>{var t=document.querySelector(`#tb_post_modal_modal-${this.state.parentID}`);t&&t.classList.add("tb_post_modal_show")}));var o=document.getElementsByTagName("html");o&&o[0]&&(o[0].style.overflow="hidden"),this.popUpCloseClckOnWindow(),window.addEventListener&&window.addEventListener("keydown",this.keyboardEvent)}componentWillUnmount(){window.removeEventListener("keydown",this.keyboardEvent)}componentDidUpdate(){const t=this;let e=0;if(window.editor){let a=document.getElementById("tb_post_modal_modal-taggbox_main"),o=document.querySelector(".tb_post_modal_conetent"),i=document.querySelector(".tb_post_modal_nxt_btn"),s=document.querySelector(".tb_post_modal_prev_btn");a&&(o&&(o.onclick=()=>e=1),i&&(i.onclick=()=>e=1),s&&(s.onclick=()=>e=1),a.onclick=()=>{0==e&&t.onCloseModal(),e=0})}}componentWillReceiveProps(t){const{postData:e}=t;let{completeData:a,eventData:o}=this.state;if(a.length!=e.postData.length){let t=e.postData.map((t=>e.completeDataObject[t])).filter((t=>!String(t.id).includes("free_add_")));o.idArray=t,this.setState({completeData:t,eventData:o},(()=>{const{currentIndex:t}=this.state;this.setState({currentIndex:t+1},(()=>this.onPopUpTrack()))}))}else{!(e.hasMoreData&&Object.keys(e.hasMoreData).length>0)||(!e.hasMoreData[0]||0!=e.hasMoreData[0].hasMoreData)&&(!e.hasMoreData[e.appendData.networkID]||e.hasMoreData[e.appendData.networkID].hasMoreData)}}render(){var t,e,a,o,i,l,n,d,c,p,h,u,m;const{wall:g,reportMediaPopUp:w,languageSetting:b,brandingNetworks:x,postData:P}=this.props,{currentIndex:f,completeData:k,eventData:S,parentID:N,allSize:I,addtoCartPopup:D,productImg:z,selectedProdDetails:U,tagProdDetail:M,prodImgIdx:A}=this.state;let E=null;E=-1===f?k[S.idArray.length-1]:k[f];const H=1==g.Personalization.popupSlideShow,R=s.HY?1==g.ThemeRule.popupContent?0:1:g.ThemeRule.hideContent,B=!!(E&&N&&Object.keys(E).length>0&&1==R&&1!=E.type),O=!!(E&&N&&Object.keys(E).length>0&&E.ugc_products&&E.ugc_products.length>0),L=!!(g.ThemeRule.shareOption&&s.HY||!s.HY),F=s.HY&&O?" tb_post_modal_ts_p":"",q=s.HY?" tb_post_modal_ts_":"",Y=`${s.uS?" tb_post_modal_te_":""}${q}${F}`,V={maxHeight:O&&s.HY&&I.winWidth>991?I.height-(L?45:0):null};return E&&N&&Object.keys(E).length>0?D?"magento"==(null===M||void 0===M||null===(t=M.UgcProduct)||void 0===t?void 0:t.created_from)?(0,r.jsx)($.A,{productImg:z,addtoCartPopup:D,productDetails:U,tagshopProductDeatil:M,closeCart:this.closeCart,onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:t=>this.setState({selectedVariant:t}),wall:g,closePopUp:this.props.closePopUP}):(0,r.jsx)(W.A,{productImg:z,addtoCartPopup:D,productDetails:U,tagshopProductDeatil:M,closeCart:this.closeCart,onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:t=>this.setState({selectedVariant:t}),wall:g,closePopUp:this.props.closePopUP}):(0,r.jsx)("div",{className:"tb_post_modal_modal",id:`tb_post_modal_modal-${N}`,children:(0,r.jsx)("div",{className:`tb_post_modal_modal_dialog${B&&!O?" tb_only_media_modal":""} ${L?" tb_post_modal_modal_full":""}${Y}`,children:(0,r.jsxs)("div",{className:"tb_post_modal_conetent",children:[(0,r.jsxs)("div",{className:"tb_post_modal_modal_head",children:[(0,r.jsxs)("div",{className:"tb_post_modal_modal_header",children:[(0,r.jsx)("div",{className:"tb_post_modal_post_link_small",children:(0,r.jsx)("div",{className:"tb_post_modal_post_address",children:E.link?(0,r.jsxs)("div",{className:"tb_post_modal_view_link",onClick:t=>window.open(E.link,"_blank"),children:[(0,r.jsxs)("div",{className:"tb_post_modal_view",children:[b.viewOnText," ",E.network.name]}),(0,r.jsx)("div",{className:"tb_post_view_ico tb__icon tb-arrow-right-alt",children:" "})]}):null})}),(0,r.jsx)("div",{className:"tb_post_modal_close_wrap",children:(0,r.jsx)("div",{className:"tb_post_modal_close_btn",onClick:this.closeWidgetPopUP,children:(0,r.jsx)("div",{className:"tb_post_close_ico tb__icon tb-close-alt",children:" "})})})]}),H?(0,r.jsxs)("div",{className:"tb_post_modal_navigation tb_post_modal_nav_content "+(1===E.type?"tb_post_modal_text_nav__":""),children:[(0,r.jsx)("div",{className:"tb_post_modal_nav tb_post_modal_prev_btn",onClick:this.featuredPopSliderChangeIndex(f-1),children:(0,r.jsx)("div",{className:"tb_post_nav tb__icon tb-arrow-left-alt",children:" "})}),(0,r.jsx)("div",{className:"tb_post_modal_nav tb_post_modal_nxt_btn",onClick:this.featuredPopSliderChangeIndex(f+1),children:(0,r.jsx)("div",{className:"tb_post_nav tb__icon tb-arrow-right-alt",children:" "})})]}):null]}),(0,r.jsx)("div",{className:"tb_post_modal_body_container",children:(0,r.jsxs)("div",{className:"tb_post_modal_modal_body",children:[1!=E.type?(0,r.jsxs)("div",{className:"tb_post_modal_details_left",children:[H?(0,r.jsxs)("div",{className:"tb_post_modal_navigation tb_post_modal_nav_img",children:[(0,r.jsx)("div",{className:"tb_post_modal_nav tb_post_modal_prev_btn",onClick:this.featuredPopSliderChangeIndex(f-1),children:(0,r.jsx)("div",{className:"tb_post_nav tb__icon tb-arrow-left-alt",children:" "})}),(0,r.jsx)("div",{className:"tb_post_modal_nav tb_post_modal_nxt_btn",onClick:this.featuredPopSliderChangeIndex(f+1),children:(0,r.jsx)("div",{className:"tb_post_nav tb__icon tb-arrow-right-alt",children:" "})})]}):null,(0,r.jsx)(_,{data:E,wall:g,allSizeCallback:this.allSize,hideContent:B&&!O,onUpdateProdImgIdx:this.onUpdateProdImgIdx})]}):null,(0,r.jsx)("div",{className:"tb_post_modal_details_right"+(1===E.type?" tb_post_modal_text__":""),children:(0,r.jsxs)("div",{className:"tb_post_modal_content_wrap",children:[(0,r.jsx)("div",{className:"tb_post_modal_content_in",style:V,children:(0,r.jsxs)("div",{className:"tb_post_modal_post_detail_wrap",children:[(null===(e=E)||void 0===e||null===(a=e.imageList)||void 0===a?void 0:a.length)>0?(null===(o=E)||void 0===o||null===(i=o.imageList[A])||void 0===i||null===(l=i.ugc_products)||void 0===l?void 0:l.length)>0?(0,r.jsx)(C,{item:{...E,ugc_products:null===(n=E)||void 0===n||null===(d=n.imageList[A])||void 0===d?void 0:d.ugc_products},wall:g,personalization:g.Personalization,ugc_products:null===(c=E)||void 0===c||null===(p=c.imageList[A])||void 0===p?void 0:p.ugc_products,openCart:this.onClickOpenCart},`product_${E.id}`):null:O?(0,r.jsx)(C,{item:E,wall:g,personalization:g.Personalization,ugc_products:E.ugc_products,openCart:this.onClickOpenCart},`product_${E.id}`):null,(0,r.jsx)(v,{item:E,ThemeRule:g.ThemeRule,Personalization:g.Personalization,ownerId:g.Wall.owner},`author_${E.id}`),B?null:(0,r.jsx)(j,{ThemeRule:g.ThemeRule,Personalization:g.Personalization,item:E,contentData:E.content,contentTitle:E.contentTitle,allSize:I,isProduct:O,socialAction:L},E.id)]})}),null!==(h=E)&&void 0!==h&&h.aiStatus||!L?null:(0,r.jsxs)("div",{className:"tb_post_modal_post_footer",children:[s.MH?(0,r.jsx)("div",{className:"tb_post_modal_post_footer_report",children:(0,r.jsx)("div",{className:"tb_post_modal_post_report_media_btn_wrap__",onClick:t=>w(E),children:(0,r.jsx)("div",{className:"tb_post_modal_post_report_media_btn__",children:"Report"})})}):null,g.ThemeRule.shareOption||s.MH||s.uS?(0,r.jsx)(y,{item:E,wall:g,languageSetting:b}):null]})]})}),null!==g&&void 0!==g&&null!==(u=g.UserRule)&&void 0!==u&&u.branding_lite&&1==g.UserRule.branding_lite||P.isFreeAdsStatus?(0,r.jsx)(T,{brandingNetworks:x,languageSetting:b,wallId:g.Wall.id,themeID:g.Personalization.widgetTheme,user:null===g||void 0===g||null===(m=g.User)||void 0===m?void 0:m.userDatabaseType}):null]})})]})})}):null}}const A=(0,i.Ng)((t=>({loaderData:t.loaderData,postHeight:t.postHeight.data})),(t=>({closePopUP:e=>t((0,w.ng)(e)),reportMediaPopUp:e=>t((0,w.lM)(e)),managePostHeight:e=>t((0,w.V3)(e)),getDataNextSteps:(e,a,o,i,s,l,n)=>t((0,w.H5)(e,a,o,i,s,l,n))})))(M)},93662:(t,e,a)=>{a.d(e,{A:()=>l});var o=a(9950),i=a(44414);const s=t=>{let{username:e,network:a,authorClass:o,errorPic:s}=t;const l="#ffffff"==a.color?"#000":a.color;return(0,i.jsx)("img",{className:`${o}__`,src:s||`https://ui-avatars.com/api/?name=${e.replace(/\s/g,"")}&background=${String(null===a.id?"#000":l).replace("#","")}&color=fff&length=1`,alt:e,width:45,height:45,"aria-label":"author image"})},l=(0,o.memo)(s)},45565:(t,e,a)=>{a.d(e,{A:()=>l});var o=a(80415),i=a(52867),s=a(44414);const l=t=>{let{size:e}=t;const a=t=>!(!(0,i.Nv)(t)||1!=e);return(0,s.jsx)("div",{ref:t=>{t&&(t.style.setProperty("opacity","0.8","important"),t.style.setProperty("display","flex","important"),t.style.setProperty("width",""+(2==e?"110px":"75px"),"important"),t.style.setProperty("height",""+(2==e?"25px":"18px"),"important"),t.style.setProperty("max-width",""+(2==e?"110px":"75px"),"important"),t.style.setProperty("max-height",""+(2==e?"25px":"18px"),"important"),t.style.setProperty("top",""+(a(55)||a(62)||a(61)?"auto":"14px"),"important"),t.style.setProperty("left",""+(a(62)||a(61)?"auto":"14px"),"important"),t.style.setProperty("right",""+(a(55)||a(62)||a(61)?"14px":"auto"),"important"),t.style.setProperty("bottom",""+(a(55)||a(62)||a(61)?"14px":"auto"),"important"),t.style.setProperty("margin","0 auto","important"),t.style.setProperty("position","absolute","important"),t.style.setProperty("visibility","visible","important"),t.style.setProperty("z-index","3","important"),t.style.setProperty("background-image",`url(${o.th}/media/images/tagshop-light.svg)`,"important"),t.style.setProperty("background-repeat","no-repeat","important"),t.style.setProperty("background-size","contain","important"),t.style.setProperty("clip-path","initial","important"))},children:(0,s.jsx)("div",{children:" "})})}},44463:(t,e,a)=>{a.r(e),a.d(e,{default:()=>n});var o=a(9950),i=a(66345),s=a(44414);const l=o.lazy((()=>a.e(620).then(a.bind(a,20620))));class n extends o.PureComponent{render(){const{network:t,networkClass:e,ThemeRule:a,isDefault:n,Personalization:r}=this.props,d=!!n&&(7!==t.id&&4!==t.id&&36!==t.id),c=i.uS&&36==t.id?"tagembed":t.icon;return d?(0,s.jsx)("div",{className:`${e} tb__icon tb-${c.replace(/fa-/g,"")}`,"aria-label":`post network ${(null===t||void 0===t?void 0:t.name)||""}`,children:(0,s.jsx)("div",{})}):(0,s.jsxs)(o.Suspense,{fallback:(0,s.jsx)(s.Fragment,{}),children:[" ",(0,s.jsx)(l,{network:t,networkClass:e})]})}}},21796:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var o=a(9950),i=a(42083),s=a(70804),l=a(44414);const n=a(53457),r=t=>(0,l.jsx)(i.default,{children:(0,s.Ay)(t)}),d=t=>{let{data:e,content:a,Personalization:o}=t;const i={color:o.hashtag_color,fontWeight:"bold",backgroundColor:1==o.hashtag_background_status?o.hashtag_background_color:"transparent"};return 20==e.network.id&&window.slackdown?(0,l.jsx)(l.Fragment,{children:1===o.hashtag_highlight&&0===o.hashtag_feed&&0===o.hashtag_all?(0,s.Ay)(a):1===o.hashtag_highlight&&0===o.hashtag_feed&&1===o.hashtag_all?r(window.slackdown.parse(n(a,/#(\w+)/g,((t,e)=>(0,l.jsxs)("div",{className:"tb_text_hashtag",style:i,children:["#",t]}))),e.slackMember)):1===o.hashtag_highlight&&1===o.hashtag_feed&&0===o.hashtag_all?r(window.slackdown.parse(n(a,e.hash.hashString,((t,e)=>(0,l.jsx)("div",{className:"tb_text_hashtag",style:i,children:t}))),e.slackMember)):1===o.hashtag_highlight&&1===o.hashtag_feed&&1===o.hashtag_all?r(window.slackdown.parse(n(a,/#(\w+)/g,((t,a)=>(0,l.jsxs)("div",{className:"tb_text_hashtag",style:i,children:["#",t]},`${e.id}_${a}`))),e.slackMember)):r(window.slackdown.parse(a,e.slackMember))}):(0,l.jsx)(l.Fragment,{children:1===o.hashtag_highlight&&0===o.hashtag_feed&&0===o.hashtag_all?(0,s.Ay)(a):1===o.hashtag_highlight&&0===o.hashtag_feed&&1===o.hashtag_all?n((0,s.Ay)(a),/#(\w+)/g,((t,e)=>(0,l.jsxs)("div",{className:"tb_text_hashtag",style:i,children:["#",t]}))):1===o.hashtag_highlight&&1===o.hashtag_feed&&0===o.hashtag_all?n((0,s.Ay)(a),e.hash.hashString,((t,e)=>(0,l.jsx)("div",{className:"tb_text_hashtag",style:i,children:t}))):1===o.hashtag_highlight&&1===o.hashtag_feed&&1===o.hashtag_all?n((0,s.Ay)(a),/#(\w+)/g,((t,a)=>(0,l.jsxs)("div",{className:"tb_text_hashtag",style:i,children:["#",t]},`${e.id}_${a}`))):(0,s.Ay)(a)})},c=(0,o.memo)(d)},98776:(t,e,a)=>{e.pG=void 0;var o=a(61529);var i=a(95962);Object.defineProperty(e,"pG",{enumerable:!0,get:function(){return i.getImageSize}});var s=a(49363)},61529:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorMessage=void 0,e.ErrorMessage={WINDOW_IS_NOT_DEFINED:"Window is not defined",URL_IS_NOT_DEFINED:"Url is not defined",TIMEOUT:"Timeout"}},95962:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getImageSize=void 0;const o=a(61529);e.getImageSize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((a,i)=>{if("undefined"===typeof window)return i(o.ErrorMessage.WINDOW_IS_NOT_DEFINED);if(!t)return i(o.ErrorMessage.URL_IS_NOT_DEFINED);let s=null;const l=new Image;l.addEventListener("load",(()=>{s&&window.clearTimeout(s),a({width:l.naturalWidth,height:l.naturalHeight})})),l.addEventListener("error",(t=>{s&&window.clearTimeout(s),i(`${t.type}: ${t.message}`)})),l.src=t,e.timeout&&(s=window.setTimeout((()=>i(o.ErrorMessage.TIMEOUT)),e.timeout))}))}},49363:function(t,e,a){var o=this&&this.__awaiter||function(t,e,a,o){return new(a||(a=Promise))((function(i,s){function l(t){try{r(o.next(t))}catch(e){s(e)}}function n(t){try{r(o.throw(t))}catch(e){s(e)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(l,n)}r((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.useImageSize=void 0;const i=a(9950),s=a(95962);e.useImageSize=(t,e)=>{const[a,l]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1),[d,c]=(0,i.useState)(null);return(0,i.useEffect)((()=>{o(void 0,void 0,void 0,(function*(){r(!0),l(null),c(null);try{const{width:a,height:o}=yield(0,s.getImageSize)(t,e);l({width:a,height:o})}catch(d){c(d.toString())}finally{r(!1)}}))}),[t,e]),[a,{loading:n,error:d}]}},49071:()=>{}}]);