(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[4971],{24971:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(10467),i=a(9950),n=a(38092),o=a.n(n),s=a(76506),l=a(59418),d=a.n(l),c=a(44414);class u extends i.Component{constructor(e){var t;super(e),t=this,this.handlePlay=()=>{this.setState({isPlaying:!0})},this.onMediaLoad=function(){var e=(0,r.A)((function*(e){var{mediaHeight:a,mediaWidth:r,postFile:i}=e;if(a&&r)t.setState({mediaSize:{height:a,width:r}});else try{var{width:n,height:o}=yield(0,s.TW)(i);t.setState({mediaSize:{height:o,width:n}})}catch(l){t.setState({mediaSize:{height:100,width:100}})}}));return function(t){return e.apply(this,arguments)}}(),this.state={imageError:!1,windowWidth:window.innerWidth,windowHeight:window.innerHeight,mediaSize:{height:400,width:400},animate:!1,item:null,isPlaying:!1}}componentDidMount(){this.onLoadAnimation()}componentDidUpdate(e){d()(e.item,this.props.item)||(this.setState({item:this.props.item,animate:!1}),this.onLoadAnimation())}onLoadAnimation(){setTimeout((()=>{this.setState({animate:!0}),this.onMediaLoad(this.props.item)}),1e3)}render(){var e,t,a,r,i,n,{item:s}=this.props,l="".concat(null===s||void 0===s||null===(e=s.media)||void 0===e||null===(t=e.image)||void 0===t?void 0:t.large),{windowHeight:d,windowWidth:u,mediaSize:h,animate:v,isPlaying:p}=this.state,f=1!=s.type,g=3==s.type||5==s.type,m=Math.min(u/h.width,d/h.height),w=h.height*m,_=h.width*m,b={paddingBottom:"".concat(100*w/_,"%")};return(0,c.jsxs)("div",{id:"spotlight__",className:"sl_container",children:[(0,c.jsx)("div",{className:"sl_overlay_ ".concat(v?"sl_media_ani":""),style:{backgroundImage:"url(".concat(l,")")}}),(0,c.jsx)("div",{className:"sl_wrap",children:(0,c.jsx)("div",{className:"sl_wrap_row sl_only_text",children:f?(0,c.jsx)("div",{className:"sl_media_wrap ".concat(v?"sl_media_ani":""),style:{maxWidth:_},children:g?(0,c.jsxs)("div",{className:"sl_media_wrap_",style:b,children:[!p&&(0,c.jsx)("img",{src:l,alt:"Video Poster",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",zIndex:1},onLoad:this.handlePlay}),(0,c.jsx)(o(),{url:(i=null===s||void 0===s||null===(a=s.media)||void 0===a||null===(r=a.video)||void 0===r?void 0:r.full,n=s.networkId,25===n?String(i).replace("https://w.soundcloud.com/player/?url=",""):i),config:{facebook:{appId:"117029975354072",attributes:{"data-width":"auto",muted:!0,poster:l}},file:{forceVideo:!0,attributes:{muted:!0,poster:l}}},className:"sl_media_",loop:!0,autoPlay:!0,muted:!0,volume:1,playsinline:!0,playing:!0,height:"100%",width:"100%",controls:!1})]}):(0,c.jsx)("div",{className:"sl_media_wrap_",style:b,children:(0,c.jsx)("img",{className:"sl_media_",src:l,height:w,width:_})})}):null})})]})}}const h=(0,i.memo)(u)},76506:(e,t,a)=>{"use strict";a.d(t,{C9:()=>f,Cq:()=>p,HI:()=>h,Ph:()=>y,S2:()=>_,TW:()=>S,Uy:()=>c,fF:()=>g,hZ:()=>m,hz:()=>v,p5:()=>x,pD:()=>N,pj:()=>j,sl:()=>b,um:()=>u,wG:()=>w});var r=a(66345),i=a(80415),n=a(296),o=a(68553),s=[],l=!1,d=new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(r.$x),Productdomain:r.QR}),c=e=>{var t;return null===(t=document.getElementById("tb_onsite_btn_id"))||void 0===t?void 0:t.classList.toggle("tb_onsite_btn_disabled",1===e)},u=e=>{var t;if(r.aD)return window.parent.postMessage(e,"*");var a={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")};null===(t=a[e])||void 0===t||t.call(a)},h=e=>{try{s.push(e)}catch(t){console.log(t)}},v=e=>e&&""!==e&&!e.includes("ui-avatars"),p=e=>{if(!e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,t),2),sizeText:["Bytes","KB","MB","GB","TB"][t]}},f=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,g=e=>{if(!e||isNaN(e))return"invalid date";var t=new Date(1e3*e);if(isNaN(t.getTime()))return"invalid date";var a=new Date,r=a-t;if(isNaN(r)||r<0)return"invalid date";var i=a.getFullYear()-t.getFullYear();if(i>0)return"".concat(i," year").concat(i>1?"s":""," ago");if(r<6e4)return"just now";var n=[{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((e=>{var{ms:t}=e;return r>=t}));if(!n)return"just now";var o=Math.floor(r/n.ms);return"".concat(o," ").concat(n.label).concat(o>1?"s":""," ago")},m=()=>["".concat(i.om),"Website Widget"],w=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",_=["localhost","widget","wall_id="].every((e=>(0,r.vq)(e)))?"taggbox_main":["".concat(r.Xg,".").concat(r.IF),"".concat(r.Xg).concat(r.t6).concat(r.IF),"".concat(r.Xg,"s.").concat(r.IF)].some((e=>(0,r.vq)(e)))?"tag_main__root":r.HY?"taggShopRoot":"taggbox_main",b=e=>{var t=Math.floor(Math.log10(e)/3)||0;if(0===t)return e.toString();var a=(e/Math.pow(1e3,t)).toFixed(2);return parseFloat(a)+["","K","M","B","T"][t]},y=e=>r.MH?e:atob(e),x=(e,t,a)=>e&&e.length>0?e.findIndex((e=>e.id===t)):a,j=()=>{try{var{wall:e}=n.A.getState().appData,{webId:t,wallId:a,ownerId:i}=e.ThemeInfo;l||(window.addEventListener("beforeunload",(()=>{if(0!==s.length){var e=s.reduce(((e,t)=>e+t),0);e>0?fetch(r.KQ,{method:"POST",headers:d,body:JSON.stringify({action:1,model:null!==o.Ex&&void 0!==o.Ex&&o.Ex.includes("website")?"website":"wall",playCount:s.length,wall:r.aD?a:t,playTime:e,owner:i}),keepalive:!0}).finally((()=>(s=[],l=!1))):(s=[],l=!1)}})),l=!0)}catch(c){console.error(c)}},S=e=>new Promise(((t,a)=>Object.assign(new Image,{onload:function(){t({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>a(new Error("Image loading error: ".concat(e.message))),src:e}))),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var a=0,r=0,i="",o=0,s="",l=[];if(t)return e.map((e=>{a+=e.averageReviews*e.totalReviews,r+=e.totalReviews,i="Overall",o=0,s=e.color,l=(null===e||void 0===e?void 0:e.reviewList)||[]})),{network:{name:i,avgRate:isNaN(a/r)?0:(a/r).toFixed(1),totalReviews:r,color:s,reviewList:l},activeId:o};var d,{wall:c}=n.A.getState().appData,u=null===c||void 0===c||null===(d=c.Banner)||void 0===d?void 0:d.title_font_color;return e.map((t=>{var n;a+=t.averageReviews*t.totalReviews,r+=t.totalReviews,i=e.length>1?"Overall":t.name,o=e.length>1?0:t.id,u=e.length>1?null===c||void 0===c||null===(n=c.Banner)||void 0===n?void 0:n.title_font_color:t.color,l=e.length>1?(e=>{try{var t=new Map;return e.forEach((e=>{e.Network.reviewList.forEach((e=>{t.set(e.rating,(t.get(e.rating)||0)+e.count)}))})),Array.from(t,(e=>{var[t,a]=e;return{rating:t,count:a}}))}catch(a){}})(e):(null===t||void 0===t?void 0:t.reviewList)||[]})),{network:{name:i,avgRate:isNaN(a/r)?0:(a/r).toFixed(1),totalReviews:r,color:u,reviewList:l},activeId:o}}catch(h){console.log("ex",h)}}},36669:(e,t,a)=>{var r=a(54467),i=a(62274),n=a(69757);function o(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new r;++t<a;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=n,e.exports=o},56010:e=>{e.exports=function(e,t){for(var a=-1,r=null==e?0:e.length;++a<r;)if(t(e[a],a,e))return!0;return!1}},1404:(e,t,a)=>{var r=a(92130),i=a(39248);e.exports=function e(t,a,n,o,s){return t===a||(null==t||null==a||!i(t)&&!i(a)?t!==t&&a!==a:r(t,a,n,o,e,s))}},92130:(e,t,a)=>{var r=a(25535),i=a(49757),n=a(21416),o=a(16195),s=a(25531),l=a(12279),d=a(6794),c=a(71641),u="[object Arguments]",h="[object Array]",v="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,a,f,g,m){var w=l(e),_=l(t),b=w?h:s(e),y=_?h:s(t),x=(b=b==u?v:b)==v,j=(y=y==u?v:y)==v,S=b==y;if(S&&d(e)){if(!d(t))return!1;w=!0,x=!1}if(S&&!x)return m||(m=new r),w||c(e)?i(e,t,a,f,g,m):n(e,t,b,a,f,g,m);if(!(1&a)){var N=x&&p.call(e,"__wrapped__"),M=j&&p.call(t,"__wrapped__");if(N||M){var I=N?e.value():e,L=M?t.value():t;return m||(m=new r),g(I,L,a,f,m)}}return!!S&&(m||(m=new r),o(e,t,a,f,g,m))}},63445:e=>{e.exports=function(e,t){return e.has(t)}},49757:(e,t,a)=>{var r=a(36669),i=a(56010),n=a(63445);e.exports=function(e,t,a,o,s,l){var d=1&a,c=e.length,u=t.length;if(c!=u&&!(d&&u>c))return!1;var h=l.get(e),v=l.get(t);if(h&&v)return h==t&&v==e;var p=-1,f=!0,g=2&a?new r:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var m=e[p],w=t[p];if(o)var _=d?o(w,m,p,t,e,l):o(m,w,p,e,t,l);if(void 0!==_){if(_)continue;f=!1;break}if(g){if(!i(t,(function(e,t){if(!n(g,t)&&(m===e||s(m,e,a,o,l)))return g.push(t)}))){f=!1;break}}else if(m!==w&&!s(m,w,a,o,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},21416:(e,t,a)=>{var r=a(4635),i=a(48246),n=a(44206),o=a(49757),s=a(90943),l=a(26557),d=r?r.prototype:void 0,c=d?d.valueOf:void 0;e.exports=function(e,t,a,r,d,u,h){switch(a){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return n(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=s;case"[object Set]":var p=1&r;if(v||(v=l),e.size!=t.size&&!p)return!1;var f=h.get(e);if(f)return f==t;r|=2,h.set(e,t);var g=o(v(e),v(t),r,d,u,h);return h.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},16195:(e,t,a)=>{var r=a(93660),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,a,n,o,s){var l=1&a,d=r(e),c=d.length;if(c!=r(t).length&&!l)return!1;for(var u=c;u--;){var h=d[u];if(!(l?h in t:i.call(t,h)))return!1}var v=s.get(e),p=s.get(t);if(v&&p)return v==t&&p==e;var f=!0;s.set(e,t),s.set(t,e);for(var g=l;++u<c;){var m=e[h=d[u]],w=t[h];if(n)var _=l?n(w,m,h,t,e,s):n(m,w,h,e,t,s);if(!(void 0===_?m===w||o(m,w,a,n,s):_)){f=!1;break}g||(g="constructor"==h)}if(f&&!g){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(f=!1)}return s.delete(e),s.delete(t),f}},90943:e=>{e.exports=function(e){var t=-1,a=Array(e.size);return e.forEach((function(e,r){a[++t]=[r,e]})),a}},62274:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},69757:e=>{e.exports=function(e){return this.__data__.has(e)}},26557:e=>{e.exports=function(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=e})),a}},59418:(e,t,a)=>{var r=a(1404);e.exports=function(e,t){return r(e,t)}}}]);