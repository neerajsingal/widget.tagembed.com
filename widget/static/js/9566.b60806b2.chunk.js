"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[9566],{12701:(t,e,i)=>{i.r(e),i.d(e,{default:()=>V});var a=i(9950),o=i(10300),s=i(89379),n=i(66345),d=i(92687),l=i(54199),r=i(83744),c=i(21850),p=i(18459),u=i(44414);const h=t=>{let{product:e,wall:i,onsetProductImg:o,openAddtocart:n,item:d,setOnProductDetails:l}=t;const{ThemeInfo:h,ProductSetting:m}=i,[v,g]=(0,a.useState)(!1),[w,_]=(0,a.useState)(!1),x=(t,e)=>(0,c.hq)({type:1,action:2,wall:h.webId,product_id:e.id,post:d.referenceId,owner:h.ownerId,feed:d.feedId,currency:e.currencyCode,price:e.discount>0?e.discount:e.price}),P=m.Button,y=t=>{const{Button:e}=m;var i=t;2==parseInt(e.newTab)?window.parent.location.href=i:window.open(i,"_blank")};return(0,u.jsxs)("div",{className:"tb_rpp_pro ".concat(v?"ts_reelTheme_No_Product":""),children:[(0,u.jsx)("div",{className:"tb_rpp_pro_wrap",children:(0,u.jsx)(p.A,{ImageClass:"tb_rpp_pro_img",media:e.image},"pro-".concat(e.id))}),(0,u.jsxs)("div",{className:"tb_rpp_pro_cont",children:[(0,u.jsx)("div",{className:"tb_rpp_pro_title",children:e.title}),e.price>0||e.discount>0?(0,u.jsxs)("div",{className:"tb_rpp_p_wrap",children:[(0,u.jsxs)("div",{className:"tb_rpp_p",children:[e.currency,e.discount>0?e.discount:e.price]}),0==e.discount||e.price==e.discount?(0,u.jsx)(u.Fragment,{}):(0,u.jsxs)("div",{className:"tb_rpp_p tb_rpp_d_p",children:[e.currency,e.price]})]}):null,(0,u.jsxs)("div",{className:"tb_rpp_btn".concat(w?" tb_rpp_btn_spinner":""),disabled:w,onClick:()=>{(async()=>{_(!0);const t={};if(e&&e.url)try{var i;if(140717==h.ownerId||1==(null===m||void 0===m||null===(i=m.Button)||void 0===i?void 0:i.pdp_target))y(e.url),o(e.image),_(!1),x(0,e);else{const i="magento"==e.createdFrom||!1;""!=e.createdFrom?(0,r.YS)(e.url,i,{productId:e.sku,storeId:e.storeId}).then((a=>{var d;if(i&&0==a.status)t[e.id]={data:{available:!0},showCart:140717!==h.ownerId};else{var l;const o=i&&(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.data)||(null===a||void 0===a?void 0:a.data),n=i?{available:!0}:{};t[e.id]={data:null!==o&&void 0!==o&&o.id?(0,s.A)((0,s.A)({},o),n):null,showCart:(null===o||void 0===o?void 0:o.id)&&140717!==h.ownerId}}o(null!==a&&void 0!==a&&null!==(d=a.data)&&void 0!==d&&d.featured_image?a.data.featured_image:e.image),_(!1),n(t,e.id,e)})).catch((t=>{console.log("error",t),y(e.url),o(e.image),_(!1),x(0,e)})):(y(e.url),o(e.image),_(!1),x(0,e))}}catch(a){console.log("error",a),y(e.url),_(!1)}})()},children:[P.text," "]})]})]},e.id)},m=(0,a.memo)(h);var v=i(78262),g=i(38092),w=i.n(g),_=i(76506);class x extends a.PureComponent{constructor(t){super(t),this.setVideoLoaded=t=>{this.setState({videoLoaded:t})},this.onUpdateTime=t=>{try{this.setState({played:this.state.played+t.playedSeconds})}catch(e){console.log(e)}},this.state={loadError:!1,paddingBottom:100,videoLoaded:!1,played:0}}componentWillUnmount(){const{played:t}=this.state;(0,_.HI)(t)}render(){var t,e,i;const{VideoClass:a,Post:o,controls:s,handleVideoEnded:n,muted:d,currentView:l,inView:r}=this.props,{videoLoaded:c}=this.state,{media:p,height:h,width:m,id:v,link:g,networkId:_}=o;return(0,u.jsxs)("div",{className:"".concat(a,"_wrap_"),style:{paddingBottom:"100vh"},children:[(0,u.jsx)(w(),{className:"".concat(a," tb_media-").concat(v),url:r?p.video.full:null===p||void 0===p||null===(t=p.image)||void 0===t?void 0:t.small,"data-height":h,"data-width":m,"data-type":"video","data-network":_,"data-link":g,"data-item-id":v,"data-load":0,config:{facebook:{appId:"117029975354072",attributes:{"data-width":m,"data-height":h,poster:null===p||void 0===p||null===(e=p.image)||void 0===e?void 0:e.small}},file:{attributes:{preload:"auto",poster:null===p||void 0===p||null===(i=p.image)||void 0===i?void 0:i.small,playsInline:!0}}},autoPlay:l?1:0,loop:!0,muted:l&&d,volume:l&&d?0:1,playsinline:!0,playing:l,height:"100%",width:"100%",controls:s,onReady:()=>this.setVideoLoaded(!0),onProgress:this.onUpdateTime,onEnded:n||null},"".concat(v,"-").concat(l,"-").concat(g)),c?null:(0,u.jsx)("div",{className:"tb_rpp_v_spinner",children:(0,u.jsx)("div",{})})]})}}var P=i(53556);const y=JSON.parse(window.localStorage.getItem("mediaDimension"));class I extends a.PureComponent{constructor(t){super(t),this.mediaSize=t=>this.props.mediaSizeCallback(t),this.state={mediaSize:{height:null!=y?y[0]:"85vh",width:null!=y?y[1]:"85vh"}}}render(){const{Post:t,wallID:e,size:i,onUpdateProdImgIdx:a,inView:o}=this.props;return(0,u.jsx)("div",{className:"tb_rp_media_holder",children:(0,u.jsx)(P.eB,{options:{direction:"ltr",pagination:!0,arrows:!1,speed:400,rewind:!0,perPage:1,perMove:1,gap:0,updateOnMove:!0,wheel:!1,paginationDirection:"ltr",classes:{pagination:"splide__pagination tb_rp_bullet"}},onMoved:(t,e)=>a(e),children:t.mediaList.map(((a,n)=>(0,u.jsx)(P.Nn,{children:[2,4].includes(a.type)?(0,u.jsx)(v.A,{ImageClass:"tb_rp_image",Post:t,mediaOnly:a,size:i,multiPic:1,multiKey:n,hotspot:!!a.product.length,inView:!0}):[3,5].includes(a.type)?(0,u.jsx)(x,{VideoClass:"tb_rp_video",media:a.video.full,mediaPoster:a.image.original,Post:(0,s.A)((0,s.A)({},t),{},{media:{video:a.video,image:a.image}}),wallID:e,size:i,isCover:!0,controls:!1,autoPlay:!0,muted:false,index:n,inView:o}):null},n)))})},t.id)}}const b=t=>{var e;const{Post:i,muted:a,index:o,wallID:n,inView:d,currentView:l}=t,r=!1;return i.mediaList&&i.mediaList.length>0?(0,u.jsx)(I,(0,s.A)({Post:i},t)):[2,4].includes(i.type)&&d?(0,u.jsx)(v.A,{ImageClass:"tb_rp_image",Post:i,size:r,hotspot:!(null===i||void 0===i||null===(e=i.product)||void 0===e||!e.length),blurBG:!1,observer:!1,index:o,inView:d}):[3,5].includes(i.type)&&d?(0,u.jsx)(x,{VideoClass:"tb_rp_video",Post:i,size:r,wallID:n,isCover:!0,controls:!1,currentView:l,muted:a,handleVideoEnded:()=>{},index:o,inView:d}):null},D=(0,a.memo)(b);var S=i(80415);function f(t){t.style.setProperty("visibility","visible","important"),t.style.setProperty("opacity","1","important"),t.style.setProperty("display","flex","important"),t.style.setProperty("transform","none","important"),t.style.setProperty("clip-path","initial","important"),t.style.setProperty("border","none","important")}class C extends a.PureComponent{render(){return(0,u.jsx)("a",{href:S.om,target:"_blank",ref:t=>{t&&(t.style.setProperty("margin-right","15px","important"),t.style.setProperty("width","90px","important"),t.style.setProperty("height","auto","important"),f(t))},children:(0,u.jsx)("img",{ref:t=>{t&&(t.style.setProperty("width","100%","important"),t.style.setProperty("height","auto","important"),f(t))},src:"".concat(S.th,"media/logos/").concat("tagbox-brand.svg")})})}}const j=t=>{var e,i,o,s;let{wall:n,item:d,onsetProductImg:l,openAddtocart:r,index:c,currentView:p,muteToggle:h,muted:v,inView:g}=t;const w=!![3,5].includes(d.type),{ThemeInfo:_,ProductSetting:x}=n,[P,y]=(0,a.useState)(0),I=t=>(0,u.jsx)("div",{className:"tb_rpp_slide_wrap",children:t.products&&t.products.map(((t,e)=>(0,u.jsx)(m,{product:t,openAddtocart:r,onsetProductImg:l,wall:n,item:d},e)))});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(D,{Post:d,wallID:_.wallId,onUpdateProdImgIdx:t=>{y(t)},ownerId:_.ownerId,ThemeID:_.id,wall:n,muted:v,currentView:p,index:c,inView:g}),(0,u.jsxs)("div",{className:"tb_rp_content",children:[x&&d.isProduct?(0,u.jsx)(I,{products:null!==(e=d.mediaList)&&void 0!==e&&e.length?null!==(i=d.mediaList)&&void 0!==i&&null!==(o=i[P])&&void 0!==o&&null!==(s=o.product)&&void 0!==s&&s.length?d.mediaList[P].product:[]:d.products}):null,w?(0,u.jsx)("div",{className:"tb_rp_mute_btn",onClick:h,children:(0,u.jsx)("div",{className:"tb__icon tb-".concat(v?"mute":"unmute"),children:(0,u.jsx)("div",{})})}):null,_.branding?(0,u.jsx)(C,{wallId:_.wallId,themeID:_.id}):null]})]})},A=(0,a.memo)(j);var k=i(52867);class N extends a.Component{constructor(t){var e;super(t),this.setMuted=()=>this.setState({muted:!this.state.muted}),this.onMediaUpdate=()=>this.setState({isAuthorImagevalid:!1}),this.onAddToCart=(t,e,i,a)=>{const{wall:o}=this.props,{webId:d,wallId:l,ownerId:r}=o.ThemeInfo;setTimeout((()=>{this.setState({addCartSetTime:!0})}),100);const c={type:1,action:2,wall:n.aD?l:d,feed:a.feedId,post:a.referenceId?a.referenceId:a.id,owner:r,product_id:i.id,currency:i.currency,currencyCode:i.currencyCode,price:i.discount>0?i.discount:i.price};this.setState({allProductDetails:t,addtoCartPopup:!0,selectedProductDetails:t[e],tagshopProductDeatil:(0,s.A)((0,s.A)({},i),{},{trackingData:c})})},this.requestData=()=>{const{wall:t,appendData:e,hasMoreData:i,loaderData:a}=this.props,{webId:o,wallId:s}=t.ThemeInfo,d=t.ThemeStyle.totalPosts,l=Math.floor(Date.now()/1e3);i&&!a.isShowMoreLoading&&this.props.nextData(n.MH?o:s,l,d,e.networkID,e.after,e.heightEvent)},this.onItemChange=t=>this.setState({item:t}),this.startSplideSlide=t=>{this.setState({activeSlide:t.index})},this.currentSplideSlide=t=>{this.onPopUpTrack(t.index),this.setState({activeSlide:t.index}),this.props.hasMoreData&&t.index==this.props.completeData.length-2&&this.requestData()},this.onPopUpTrack=t=>{try{const{wall:e,completeData:i}=this.props,{ThemeInfo:a}=e;let o=i[t]?i[t]:null;if(o){const t={feed:o.feedId,post:o.referenceId?o.referenceId:o.id},e={action:2,wall:a.webId,feed:o.feedId,post:o.referenceId?o.referenceId:o.id,type:3,owner:a.ownerId};(0,c.hq)(n.Qy?e:(0,s.A)((0,s.A)({action:2,wall:a.webId},t),{},{owner:a.ownerId,type:3}))}}catch(e){console.log("Error in PopUp Tracking",e)}},this.onClickClosePopUp=t=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null,addCartSetTime:!1}),this.onClickCheckOut=t=>this.setState({addtoCartPopup:!0,continueShopping:!1}),this.sliderRef=a.createRef(),this.state={currentIndex:null===(e=this.props)||void 0===e?void 0:e.currentIndex,item:this.props.item,windowWidth:window.innerWidth,isAuthorImagevalid:!0,isHotspot:!1,addtoCartPopup:!1,allProductDetails:null,selectedProductId:null,selectedProductDetails:null,continueShopping:!1,selectedVariant:null,showAddToCart:!1,productLoading:!0,productImg:"",tagshopProductDeatil:null,muted:!!(0,k.RP)(),activeSlide:0,addCartSetTime:!1,selectedProdDetails:null,tagProdDetail:null},this.splideRef=a.createRef()}componentDidMount(){const{currentIndex:t,item:e}=this.props,i=(0,_.hz)(e.author.picture);this.setState({currentIndex:t,item:e,isAuthorImagevalid:i})}UNSAFE_componentWillReceiveProps(t){const{currentIndex:e,item:i}=t,a=(0,_.hz)(i.author.picture);this.setState({currentIndex:e,item:i,isAuthorImagevalid:a})}render(){const{onClosePopUp:t,slideWithArrowKeys:e,wall:i,completeData:a}=this.props,{currentIndex:o,item:s,addtoCartPopup:n,selectedProductDetails:r,continueShopping:c,productImg:p,tagshopProductDeatil:h,addCartSetTime:m,muted:v,activeSlide:g}=this.state;return(0,u.jsxs)("div",{className:"modalId".concat(s.id," tb_rp_modal ").concat(m?"tb_rp_add_cart_m":""),onKeyDown:e,onKeyPress:e,onLoad:e,onClick:e=>e.currentTarget==e.target&&t(e),children:[(0,u.jsxs)("div",{className:"tb_rp_dialog",children:[n||c?null:(0,u.jsx)("div",{className:"tb_reel_close_btn",onClick:t,children:(0,u.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,u.jsx)("div",{})})}),(0,u.jsx)("div",{className:"tb_time_line_wrap",children:(0,u.jsx)("div",{className:"tb_time_line",children:(0,u.jsx)("div",{})})}),(0,u.jsx)(P.eB,{ref:this.splideRef,options:{direction:"ttb",height:window.innerHeight,start:o,wheel:!1,releaseWheel:!0,sensitivity:1,drag:!0,pagination:!1,arrows:!1,isNavigation:!1,updateOnMove:!0},onMoved:this.currentSplideSlide,onMounted:this.startSplideSlide,children:a&&a.length>0?a.map(((e,a)=>(0,u.jsx)(P.Nn,{children:(0,u.jsx)(A,{currentView:g===a,onClosePopUp:t,wall:i,item:e,openAddtocart:(t,i,a)=>this.onAddToCart(t,i,a,e),onsetProductImg:t=>this.setState({productImg:t}),muteToggle:this.setMuted,muted:v,inView:Math.abs(g-a)<=2},"".concat(e.id,"-").concat(a))},"".concat(e.id,"-").concat(a)))):null})]}),n&&r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"tb_rp_cart_overlay",children:(0,u.jsx)("div",{})}),(0,u.jsx)("div",{className:"tb_rp_cart_modal",children:(0,u.jsxs)("div",{className:"tb_rp_cart_body",children:[(0,u.jsx)("div",{className:"ts_reel_close_btn tb_reel_close_btn",onClick:n&&!c?this.onClickClosePopUp:c?t=>this.setState({addtoCartPopup:!0,continueShopping:!1}):null,children:(0,u.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,u.jsx)("div",{})})}),(0,u.jsx)("div",{className:"tb_rp_cart_wrap",children:r&&Object.keys(r).length>0?"magento"==(null===h||void 0===h?void 0:h.createdFrom)?(0,u.jsx)(d.A,{productImg:p,addtoCartPopup:n,productDetails:r,tagshopProductDeatil:h,closeCart:t=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:t=>this.setState({selectedVariant:t}),wall:i,closePopUp:this.props.onClosePopUp}):(0,u.jsx)(l.A,{productImg:p,addtoCartPopup:n,productDetails:r,tagshopProductDeatil:h,closeCart:t=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:t=>this.setState({selectedVariant:t}),wall:i,closePopUp:this.props.onClosePopUp}):null})]})})]}):null]})}}const T=(0,o.Ng)((t=>{const{appData:e}=t;return{loaderData:t.loaderData,appendData:e.postData.appendData,hasMoreData:!e.postData.hasMoreData[0]||0!=e.postData.hasMoreData[0].hasMoreData&&(!e.postData.hasMoreData[e.postData.appendData.networkID]||e.postData.hasMoreData[e.postData.appendData.networkID].hasMoreData)}}),(t=>({nextData:(e,i,a,o,s,n,d)=>t((0,c.wF)(e,i,a,o,s,n,d))})))((0,a.memo)(N));var U=i(93152);class M extends a.PureComponent{constructor(){super(...arguments),this.state={isEnable:0,eventData:{},shareText:"SHARE",viewOnText:"View on",currentIndex:null,completeData:{},personalization:{},url:null,imgData:[]},this.closeCommercePopUP=t=>{this.setState({isEnable:0,currentIndex:null},(()=>this.props.closePopUP()));var e=document.getElementsByTagName("html");e&&e[0]&&(e[0].style.overflow="")},this.getCommercePopUPEvent=t=>{null!==t&&void 0!==t&&t.card&&this.setState({url:"",isEnable:1,eventData:t,currentIndex:t.index,completeData:t.idArray,viewOnText:t.viewOnText,shareText:t.shareText,windowParent:t,imgData:t.imgData,personalization:t.personalization},(()=>this.CommercePopUPSlideWithArrowKey()))},this.featuredPopSliderChangeIndex=t=>this.updateCurrentInde(t),this.SliderWithKey=t=>this.updateCurrentInde(t),this.updateCurrentInde=t=>{const{eventData:e}=this.state;-1===t?this.setState({currentIndex:e.idArray.length-1}):this.setState({currentIndex:e.idArray.length===t?0:t})},this.CommercePopUPSlideWithArrowKey=t=>{const{personalization:e}=this.state;if(e&&1===e.popupSlideShow){let e=this;(t=t||window.event)&&t.keyCode&&void 0!==t.keyCode&&(37===t.keyCode?e.SliderWithKey(e.state.currentIndex-1):39===t.keyCode?e.SliderWithKey(e.state.currentIndex+1):27===t.keyCode&&this.closeCommercePopUP())}}}componentDidMount(){const{data:t}=this.props;this.getCommercePopUPEvent(t);var e=document.getElementsByTagName("html");e&&e[0]&&(e[0].style.overflow="hidden")}componentDidUpdate(t){this.props.data!==t.data&&this.getCommercePopUPEvent(this.props.data)}UNSAFE_componentWillReceiveProps(t){const{postData:e}=t;let{completeData:i,eventData:a}=this.state;if(i.length!=e.postData.length){let t=e.postData.map((t=>e.completeDataObject[t])).filter((t=>!String(t.id).includes("free_add_")));a.idArray=t,this.setState({completeData:t,eventData:a},(()=>{const{currentIndex:t}=this.state;this.setState({currentIndex:t+1})}))}}render(){const{viewOnText:t,isEnable:e,currentIndex:i,personalization:a,completeData:o,eventData:s,url:n,imgData:d}=this.state,{wall:l,webFilters:r}=this.props;let c=null;return c=-1===i?o[s.idArray.length-1]:o[i],1===e&&l&&Object(o||{}).length>0?(0,u.jsx)(T,{webFilters:r,wall:l,item:c,completeData:o,onClosePopUp:this.closeCommercePopUP,currentIndex:i,personalization:a,viewOnText:t,slideWithArrowKeys:this.CommercePopUPSlideWithArrowKey,featuredPopSliderChangeIndex:this.featuredPopSliderChangeIndex,hostUrl:n,imgData:d}):null}}const V=(0,o.Ng)((t=>({wall:t.appData.wall,webFilters:t.appData.webFilters})),(t=>({closePopUP:e=>t((0,U.ng)(e))})))(M)},45285:(t,e,i)=>{i.d(e,{bs:()=>c});var a=i(89379),o=i(80415),s=i(296),n=i(52867),d=i(66345),l=i(14313);let r=[];const c=t=>{t.persist();const e=t.target,{network:i,itemId:a,themeId:o}=e.dataset;if(1!=i||[3,4,16,47,50,55,60].includes(o))r.includes(t)||r.push(t);else{const t=document.querySelector(".tb_media-".concat(a));t&&(t.style.display="none")}1===r.length&&p()},p=async()=>{var t;const{postData:e,wall:i}=s.A.getState().appData;if(!i||!Object.keys(i).length||!r.length)return;const{User:c,Wall:h}=i,m=null===c||void 0===c?void 0:c.id,v=(d.aD,null===h||void 0===h?void 0:h.id),g=null===(t=r[0])||void 0===t?void 0:t.target,{filterId:w,network:_,itemId:x,load:P}=g.dataset,y=document.querySelector('img[data-item-id="'.concat(x,'"]')),I=null!==e&&void 0!==e&&e.completeDataObject?Object.values(e.completeDataObject).filter((t=>t.id===x)):[];if(null!==I&&void 0!==I&&I.length){var b;const t=await(async t=>["taggbox.com","tagbox.com","tagembed.com","socialwalls.com"].some((e=>t.includes(e)))||await fetch(t).then((t=>t.ok)).catch((()=>!1)))(null===(b=I[0])||void 0===b?void 0:b.postFileNew);if(!t&&y){if([2,18,3,28].includes(+_)&&"0"===P&&"34"!==w&&!g.src.includes("cloud.taggbox.com")){const t=((t,e,i)=>{var o,s,n,d,l;const{UserPlan:r,Wall:c}=e;return(0,a.A)((0,a.A)((0,a.A)({table_name:null===r||void 0===r?void 0:r.db_table},t),null!==i&&void 0!==i&&i.length?{feedId:null===(o=i[0])||void 0===o?void 0:o.feedId,type:null===(s=i[0])||void 0===s?void 0:s.type,link:null===(n=i[0])||void 0===n?void 0:n.link,postFile:null===(d=i[0])||void 0===d?void 0:d.postFile,mediaFile:null===(l=i[0])||void 0===l?void 0:l.mediaFile}:{}),{},{url:null===c||void 0===c?void 0:c.url})})({wallId:v,postId:x,ownerId:m},i,I);try{const{data:e}=await(new l.A).post(d.t5,t,{headers:(0,n.Ky)()}),i=d.aD?"https://images.".concat(d.QR,"/"):"";g.src="18"===_?"".concat(i).concat(e.media):e.media}catch(D){g.src=o.gX}finally{u(g)}}else g.src=o.gX,u(g);r.shift(),p()}else{const t="".concat(o.th,"media/images/no-image.svg");g.src=t,g.srcset=t,u(g),r.shift()}}},u=t=>t.setAttribute("data-load","1")},78262:(t,e,i)=>{i.d(e,{A:()=>r});var a=i(9950),o=i(76506),s=i(80415),n=i(45285),d=i(44414);const l=(0,a.lazy)((()=>Promise.all([i.e(1823),i.e(9874)]).then(i.bind(i,89874))));class r extends a.PureComponent{constructor(t){var e,i;super(t),this.updateMediaDimensions=()=>{if(this.mediaRef.current){const{offsetHeight:t,offsetWidth:e}=this.mediaRef.current;this.setState({currentHeight:t,currentWidth:e})}},this.mediaSizeCalc=async()=>{const{Post:t,mediaOnly:e}=this.props,i=e||t.media;if((null===i||void 0===i||!i.height)&&(null===i||void 0===i||!i.width))try{var a;const{width:t,height:e}=await(0,o.TW)(null===i||void 0===i||null===(a=i.image)||void 0===a?void 0:a.small);this._isMounted&&this.setState({height:e,width:t})}catch(s){this._isMounted&&this.setState({height:300,width:300})}};const{mediaOnly:s,Post:n}=t;this.state={height:(null===s||void 0===s?void 0:s.height)||(null===n||void 0===n||null===(e=n.media)||void 0===e?void 0:e.height)||0,width:(null===s||void 0===s?void 0:s.width)||(null===n||void 0===n||null===(i=n.media)||void 0===i?void 0:i.width)||0,currentHeight:0,currentWidth:0},this.mediaRef=a.createRef()}componentDidMount(){this._isMounted=!0,requestAnimationFrame((()=>{this.updateMediaDimensions(),this.mediaSizeCalc()}))}componentWillUnmount(){this._isMounted=!1}render(){var t,e,i,o,r;const{height:c,width:p}=this.state,{ImageClass:u,Post:h,hotspot:m,size:v,blurBG:g,mediaOnly:w,inView:_,multiKey:x,index:P,ProductSetting:y}=this.props,{id:I,link:b,products:D}=h,S=w||(null===h||void 0===h?void 0:h.media),{currentWidth:f,currentHeight:C}=this.state,j=v||100*c/p,A={paddingBottom:1===j?null:"".concat(j,"%")},k={backgroundImage:_?"url(".concat(null===S||void 0===S||null===(t=S.image)||void 0===t?void 0:t.small,")"):null},N=p>c?"100%":"".concat(p/c*100,"%"),T=p>c?"".concat(c/p*100,"%"):"100%",U=h.isProduct&&m&&h.hotspot&&(null===y||void 0===y||null===(e=y.Hotspot)||void 0===e?void 0:e.status),M={width:U&&v?N:null,height:U&&v?T:null};return(0,d.jsxs)("div",{className:"".concat(u,"_wrap_ mediaHolder").concat(null===h||void 0===h?void 0:h.id),style:A,ref:this.mediaRef,children:[U&&g?(0,d.jsx)("div",{className:"tb_blur_bg_",style:k}):null,(0,d.jsxs)("div",{className:"".concat(u,"_wrap_in"),style:M,children:[U?(0,d.jsx)(a.Suspense,{fallback:(0,d.jsx)(d.Fragment,{}),children:(0,d.jsx)(l,{products:this.props.multiPic?h.mediaList[x].product:D,hotspot:h.hotspot,Post:h,showTooltip:null},P)}):null,_?(0,d.jsx)("img",{className:"".concat(u," tb_media-").concat(I),src:null===S||void 0===S||null===(i=S.image)||void 0===i?void 0:i.small,srcSet:"".concat(null===S||void 0===S||null===(o=S.image)||void 0===o?void 0:o.small," 1x, ").concat(null===S||void 0===S||null===(r=S.image)||void 0===r?void 0:r.large," 2x"),sizes:"".concat(f,"px"),loading:_?"eager":"lazy",decoding:"async",fetchPriority:_?"high":"low","data-id":I,height:C,width:f,"data-height":c,"data-width":p,"data-link":b,onLoad:this.onLoad,onError:t=>{t.target.src="".concat(s.th,"media/error/no-image.svg"),t.target.srcset="".concat(s.th,"media/error/no-image.svg"),(0,n.bs)(t)},alt:null===S||void 0===S?void 0:S.title,title:null===S||void 0===S?void 0:S.title},"".concat(I,"-").concat(c,"-").concat(p,"-").concat(_)):null]})]})}}}}]);