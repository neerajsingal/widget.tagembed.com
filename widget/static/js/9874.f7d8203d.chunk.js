"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[9874],{89874:(t,o,e)=>{e.r(o),e.d(o,{default:()=>u});var l=e(9950),i=e(10300),s=e(1823),n=e(21850),d=e(82652),p=e(44414);const c=(0,l.memo)((t=>{let{item:o}=t;const e=o.discount>0&&o.discount!==o.price,l=o.discount>0?o.discount:o.price;return(0,p.jsxs)("a",{hotspot:1,href:o.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,p.jsx)("div",{hotspot:1,className:"tb_p_tooltip_title",children:o.title}),e&&(0,p.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price tb_price_disabled",children:[o.currency,o.price]}),(o.price>0||o.discount>0)&&(0,p.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price",children:[o.currency,l]})]})})),r=t=>{let{products:o,appData:e,Post:i,showTooltip:r,isPopup:a}=t;const[u,_]=(0,l.useState)(null),h=(0,l.useMemo)((()=>{var t,o;return(null===e||void 0===e||null===(t=e.wall)||void 0===t||null===(o=t.ProductSetting)||void 0===o?void 0:o.Hotspot)||{}}),[e]);(0,l.useEffect)((()=>{if(r){const t=o.findIndex((t=>t.id===r));-1!==t&&_(t)}else _(null)}),[r,o]);const b=(0,l.useCallback)((t=>{var o,l,s,d;null!==e&&void 0!==e&&e.wall&&(0,n.hq)({type:1,action:2,wall:null===e||void 0===e||null===(o=e.wall)||void 0===o||null===(l=o.ThemeInfo)||void 0===l?void 0:l.webId,product_id:t.id,post:i.referenceId,owner:null===e||void 0===e||null===(s=e.wall)||void 0===s||null===(d=s.ThemeInfo)||void 0===d?void 0:d.ownerId,feed:i.feedId,currency:t.currencyCode,price:Number(t.discount)>0?t.discount:t.price})}),[e,i]),v=(0,l.useCallback)(((t,o)=>{t.stopPropagation(),b(o),window.open(o.url,"_blank")}),[b]);return null!==h&&void 0!==h&&h.status?o.map(((t,o)=>{const e=`hotspot-${t.id}-${o}${a?"-pop":""}`,l=u===o;return(0,p.jsxs)("div",{id:e,className:"tb_hotspot_dot"+(l?" tb_hotspot_active_":""),role:"button",style:{top:t.hotspot.top,left:t.hotspot.left},onMouseEnter:()=>_(o),onMouseLeave:()=>_(null),onClick:o=>{v(o,t)},"data-tooltip-offset":7,children:[(0,p.jsx)("div",{hotspot:1,className:"tb_hotspot__ "+(0===h.type?"tb_hotspot_ani__":""),children:o+1}),(0,p.jsx)(d.A,{wallId:e,children:(0,p.jsx)(s.m_,{appendTo:"body","data-tooltip-id":`tooltip-${t.id}-${o}${a?"-pop":""}`,className:"tb_pro_tooltip",anchorSelect:`#${e}`,clickable:!0,...a?{isOpen:l}:{},children:(0,p.jsx)(c,{item:t})},o)})]},`${t.id}-${o}`)})):null},a=(0,l.memo)(r),u=(0,i.Ng)((t=>({appData:t.appData})))(a)}}]);